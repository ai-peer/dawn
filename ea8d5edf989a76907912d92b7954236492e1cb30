{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "efc6b009_6c80af98",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2022-11-23T22:16:07Z",
      "side": 1,
      "message": "PTAL. I\u0027ll get CTS fixed tomorrow.\n\nIs this something that we would need to deprecate first? I\u0027m not sure about the API policy for changes like this, but I assume this could break existing stuff.",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b3e8446_a5f5a63d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2022-11-23T23:22:03Z",
      "side": 1,
      "message": "LGTM\n\nadding cwallez as the US is on holiday starting tomorrow",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a1535f0_412f8ed7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2022-11-23T23:22:03Z",
      "side": 1,
      "message": "yes, I think we should probably add the deprecation warning - and that\u0027ll probably mean adding another member like minBufferSizeNoPadding.\n\nI think a lot of people like to use the default bind group layout so they would be surprised to see the required size change on them.\n\ntests for the deprecation warning should go in DeprecatedAPITests.cpp\n\nfyi you might have conflicts with https://dawn-review.googlesource.com/c/dawn/+/111321\n(cc Shrek)",
      "parentUuid": "efc6b009_6c80af98",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62f2762f_67208758",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2022-11-23T23:22:23Z",
      "side": 1,
      "message": "actually cc\u0027ing Shrek",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d17779a_da41a2e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2022-11-24T01:29:16Z",
      "side": 1,
      "message": "\u003e that\u0027ll probably mean adding another member like minBufferSizeNoPadding.\n\nThese structs are auto-generated from dawn.json, so adding the extra member means it\u0027ll show up in dawn/webgpu.h as well. Is that going to affect dawn-native users in weird ways, or is it OK?\n\n\u003e tests for the deprecation warning should go in DeprecatedAPITests.cpp\n\nWill do.\n\n\u003e fyi you might have conflicts with https://dawn-review.googlesource.com/c/dawn/+/111321\n\nAck, will rebase when that lands.",
      "parentUuid": "0a1535f0_412f8ed7",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47999aa5_053b4183",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2022-11-24T01:39:12Z",
      "side": 1,
      "message": "hmm... so the [BindingInfo](https://source.chromium.org/chromium/chromium/src/+/main:third_party/dawn/src/dawn/native/BindingInfo.h;l\u003d61;drc\u003d24e5d915169bb4a4a0cff916ba1424fd6b31abcb;bpv\u003d1;bpt\u003d1) itself is internal to Dawn but it contains a BufferBindingLayout that is autogenerated.\n\nCould we make a\n```\nstruct BufferBindingLayoutWithExtras : BufferBindingLayout {\n  uint64_t minBindingSizeNoPadding;\n}\n```\n(idk a good name)\nand use that in places instead?\n\nalso, with these changes, watch out for `BindGroupLayoutBase::ComputeContentHash`, `SortBindingsCompare` and `operator!\u003d(const BindingInfo\u0026 a, const BindingInfo\u0026 b)`. These need to get updated whenever there are new members. (and any other places minBufferSize is used)",
      "parentUuid": "3d17779a_da41a2e3",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe7f5afd_cc478758",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-11-24T10:29:43Z",
      "side": 1,
      "message": "No additional comments LGTM",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22626e75_c4fedb7d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2022-11-28T20:21:09Z",
      "side": 1,
      "message": "AFAICT this extra field would need to be propagated outside of Dawn though.\n\nFor a default pipeline layout, we copy it out from the internal `ShaderBindingInfo` to the external `BindGroupLayoutEntry` struct here:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/dawn/src/dawn/native/PipelineLayout.cpp;l\u003d179\n\n... and then it gets copied back into the internal `BindingInfo` when the bind group is created:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/dawn/src/dawn/native/BindGroupLayout.cpp;l\u003d327\n\nThat presumably means we can\u0027t solve this by just making an internal-only `BufferBindingLayoutWithExtras` struct as you suggest, unless I\u0027m misunderstanding?",
      "parentUuid": "47999aa5_053b4183",
      "revId": "ea8d5edf989a76907912d92b7954236492e1cb30",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}