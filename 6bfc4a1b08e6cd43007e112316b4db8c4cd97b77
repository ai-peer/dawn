{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e2a06220_e8ea12f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003896
      },
      "writtenOn": "2023-07-28T05:12:51Z",
      "side": 1,
      "message": "dunno if this approach will be popular or not but it gets things working at least",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07937519_27c223e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-11T12:54:13Z",
      "side": 1,
      "message": "Lgtm",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "106b18de_1c56d2db",
        "filename": "src/dawn/node/binding/GPUAdapter.cpp",
        "patchSetId": 2
      },
      "lineNbr": 125,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-08-07T10:36:02Z",
      "side": 1,
      "message": "Looks like this should go into a separate change, along with the `wgpu::FeatureName` change.",
      "range": {
        "startLine": 122,
        "startChar": 0,
        "endLine": 125,
        "endChar": 5
      },
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ec8ce2e_06e9dee6",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-08-07T10:36:02Z",
      "side": 1,
      "message": "Is the `require` path always relative to the `.js` file?",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3aa0f75_60037ec1",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1003896
      },
      "writtenOn": "2023-08-07T16:38:52Z",
      "side": 1,
      "message": "yes",
      "parentUuid": "4ec8ce2e_06e9dee6",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84d29c21_46cb7695",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-11T12:54:13Z",
      "side": 1,
      "message": "Is it commonplace to have native modules accompanied by JS stubs like this?",
      "parentUuid": "e3aa0f75_60037ec1",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c79c796_4b3e74da",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1003896
      },
      "writtenOn": "2023-08-15T15:24:37Z",
      "side": 1,
      "message": "yes, in fact usually native modules have as much logic in JS as possible so they only pay the cost for jumping between JS and C++ when absolutely necessary.",
      "parentUuid": "84d29c21_46cb7695",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c3f360c_70ce3033",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-06T20:14:44Z",
      "side": 1,
      "message": "I\u0027m not sure that we need two separate entrypoints: the CTS can use the same module as other node modules as long as the create method is in the exports.\n\nIn the cmdline mode, the GPUProvider is set to the create method\n\nhttps://github.com/gpuweb/cts/blob/9f097553321962196792ea06f5448ce8e17f5c1b/src/common/runtime/cmdline.ts#L114\nhttps://github.com/gpuweb/cts/blob/9f097553321962196792ea06f5448ce8e17f5c1b/src/common/runtime/cmdline.ts#L95\n\nWhich is then used to create the GPU object to request an adapter..\n\nhttps://github.com/gpuweb/cts/blob/9f097553321962196792ea06f5448ce8e17f5c1b/src/common/util/navigator_gpu.ts#L63\n\nCouldn\u0027t we have dawn.node export:\n\n - all interfaces (like GPUBindGroup, GPUAdapter etc)\n - gpu which is an object that defaults to having no flags. (is there precedent for adding magical environment variables like DAWN_FLAGS here in node modules? It seems dangerous from a security PoV).\n - create which the CTS and whoever else would use.",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "029092fc_45f46119",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1003896
      },
      "writtenOn": "2023-08-07T16:38:52Z",
      "side": 1,
      "message": "I don\u0027t think that the npm module should have `create` as part of its exposed api. is there a particular concern you have about the entrypoint files? Also, i don\u0027t think the globals injection is something a single entrypoint can handle. DAWN_FLAGS isn\u0027t needed, i just thought it would be nice for debugging. it isn\u0027t a security issue at least, something with env access can do a lot more damage than messing with dawn.",
      "parentUuid": "2c3f360c_70ce3033",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b63e976_5f7d0202",
        "filename": "src/dawn/node/cts.js",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-11T12:54:13Z",
      "side": 1,
      "message": "Sounds good for the DAWN_FLAGS.\n\nJust have concerns about the entrypoint files because they make deployment slightly more complex I\u0027d imagine, and I don\u0027t know if it is a standard practice.",
      "parentUuid": "029092fc_45f46119",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e580f11_db63053c",
        "filename": "src/dawn/node/interop/WebGPU.cpp.tmpl",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-08-07T10:36:02Z",
      "side": 1,
      "message": "This isn\u0027t the global object any more (at least not within this context), so I\u0027d suggest giving this a different name. `result`, `api`, `webgpu` or something.",
      "range": {
        "startLine": 58,
        "startChar": 7,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56692df7_aae79072",
        "filename": "src/dawn/node/interop/WebGPU.cpp.tmpl",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1003896
      },
      "writtenOn": "2023-08-07T16:38:52Z",
      "side": 1,
      "message": "i can call it something else but are any of the things here not specified to be globals? in my mind it still conceptually represents that, but we\u0027re just never actually attaching them in the npm case.",
      "parentUuid": "3e580f11_db63053c",
      "range": {
        "startLine": 58,
        "startChar": 7,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2989a9c4_fb688e9e",
        "filename": "src/dawn/node/interop/WebGPU.cpp.tmpl",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-11T12:54:13Z",
      "side": 1,
      "message": "No preference here.",
      "parentUuid": "56692df7_aae79072",
      "range": {
        "startLine": 58,
        "startChar": 7,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83b3ab29_3b6c4b2b",
        "filename": "src/dawn/node/interop/WebGPU.h.tmpl",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-08-07T10:36:02Z",
      "side": 1,
      "message": "Please document the return object.",
      "revId": "6bfc4a1b08e6cd43007e112316b4db8c4cd97b77",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}