{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5451c70f_3a7b55bd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-12-01T01:57:00Z",
      "side": 1,
      "message": "Cool. The only re-use case remaining is AttachmentStateBlueprint now.",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72e16710_132a5876",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-12-01T22:36:22Z",
      "side": 1,
      "message": "LGTM thanks, much simpler now",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95572b9b_79f06df9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-12-02T15:24:28Z",
      "side": 1,
      "message": "LGTM too with some comments.",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26038500_64803a04",
        "filename": "src/dawn_native/CachedObject.cpp",
        "patchSetId": 15
      },
      "lineNbr": 36,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-12-01T22:36:22Z",
      "side": 1,
      "message": "nit: can we rename \"key\" and \"hash\" to both be \"fingerprint\" ? Or maybe \"contentHash\" is a better name.",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 36,
        "endChar": 5
      },
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c0a560d_267644a7",
        "filename": "src/dawn_native/CachedObject.cpp",
        "patchSetId": 15
      },
      "lineNbr": 36,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-12-02T15:24:28Z",
      "side": 1,
      "message": "nit: Then maybe FingerprintRecorder should be ObejctContentHasher or something?",
      "parentUuid": "26038500_64803a04",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 36,
        "endChar": 5
      },
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94c0ba2d_b7d7a7b2",
        "filename": "src/dawn_native/CachedObject.cpp",
        "patchSetId": 15
      },
      "lineNbr": 36,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-12-02T20:28:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c0a560d_267644a7",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 36,
        "endChar": 5
      },
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66bb6563_47e61fa8",
        "filename": "src/dawn_native/Device.cpp",
        "patchSetId": 15
      },
      "lineNbr": 478,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-12-02T15:24:28Z",
      "side": 1,
      "message": "Do we see a way to factor all this very similar looking code to avoid missing a SetKey somewhere when we add more content-less objects? (or don\u0027t forget to update one of the functions when we modify the logic)?",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "436bcb1d_22807601",
        "filename": "src/dawn_native/Device.cpp",
        "patchSetId": 15
      },
      "lineNbr": 478,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-12-02T20:28:14Z",
      "side": 1,
      "message": "Hmm. Could do something like...\n\n    template \u003ctypename Obj, typename Desc, typename CreateFn\u003e\n    ResultOrError\u003cRef\u003cObj\u003e\u003e GetOrCreateCachedObjectHelper(\n        Device* device,\n        const Descriptor* descriptor,\n        ContentLessObjectCache\u003cObj\u003e\u0026 cache,\n        CreateFn createFn) {\n    ...\n    DAWN_TRY_ASSIGN(backendObj, ((*device).*(createFn))(descriptor));\n    ...\n   }\n\nThen each GetOrCreate...\n\n    GetOrCreateCachedObjectHelper(this, descriptor, mCaches-\u003ebindGroupLayouts,\n    \u0026DeviceBase::CreateBindGroupLayoutImpl);\n\nWould that work?",
      "parentUuid": "66bb6563_47e61fa8",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5548b60f_ede5c295",
        "filename": "src/dawn_native/Device.cpp",
        "patchSetId": 15
      },
      "lineNbr": 478,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-12-02T22:50:55Z",
      "side": 1,
      "message": "Seems like a good idea. we could probably even make the cache a tuple so we can do: objCache \u003d std::get\u003cObj\u003e(caches) and avoid passing the cache explicitly. I might also reorder template args in case we have an Impl that takes more than one argument (I have a CL that does thaT). So have a varadic thing at the end.\n\nalso, protected/private might give you a hard time. the helper might need to be a friend struct forward declared in the header or something.\n\nLet\u0027s be sure though to keep the template instantiation only in Device.cpp so we don\u0027t add too much bloat.",
      "parentUuid": "436bcb1d_22807601",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "100d7a18_2cdd7acb",
        "filename": "src/dawn_native/FingerprintRecorder.h",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-12-02T15:24:28Z",
      "side": 1,
      "message": "This object is always only used in a local scope and that ends with `return GetKey()`, it seems that it\u0027s just extending HashCombine and Hash (the only issue is that we want to use GetKey for pointers I guess?)",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d1b7cbf_8ac64048",
        "filename": "src/dawn_native/FingerprintRecorder.h",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-12-02T20:28:14Z",
      "side": 1,
      "message": "Yup, fixed comment. Requires the use of GetKey() and disallows hashing T*.",
      "parentUuid": "100d7a18_2cdd7acb",
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a347ee89_f0ce0953",
        "filename": "src/dawn_native/FingerprintRecorder.h",
        "patchSetId": 15
      },
      "lineNbr": 56,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-12-01T22:36:22Z",
      "side": 1,
      "message": "hm, maybe my suggestion wasn\u0027t great. Seems like it would be better to have this do recorder-\u003eRecordObject(obj-\u003eGetKey());",
      "range": {
        "startLine": 54,
        "startChar": 16,
        "endLine": 56,
        "endChar": 30
      },
      "revId": "6219360dd54b26d5d753dbbc5bc1d25fce9ea9a0",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}