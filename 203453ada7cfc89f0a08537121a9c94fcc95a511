{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b4fca662_8d59fa89",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2023-09-20T06:01:18Z",
      "side": 1,
      "message": "On my machine the overhead of BindGroupTracker::~BindGroupTracker drops from 9% to 3% with this minor change. How do you like it, @penghuang@chromium.org?\n\nCurrent:\n```\nFunction Name\tTotal CPU [unit, %]\tSelf CPU [unit, %]\tModule\tCategory\n| + dawn::native::d3d11::CommandBuffer::Execute\t93 (45.59%)\t0 (0.00%)\tchrome\t\n|| + dawn::native::d3d11::CommandBuffer::ExecuteRenderPass\t73 (35.78%)\t0 (0.00%)\tchrome\t\n||| - dawn::native::d3d11::CommandBuffer::ExecuteRenderPass::\u003clambda_2\u003e::operator()\t44 (21.57%)\t0 (0.00%)\tchrome\t\n||| + dawn::native::d3d11::BindGroupTracker::~BindGroupTracker\t19 (9.31%)\t0 (0.00%)\tchrome\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_OMSetRenderTargetsAndUnorderedAccessViews_@$01@CContext@@SAXPEAUID3D11DeviceContext5@@IPEBQEAUID3D11RenderTargetView@@PEAUID3D11DepthStencilView@@IIPEBQEAUID3D11UnorderedAccessView@@PEBI@Z\t11 (5.39%)\t11 (5.39%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetConstantBuffers1_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11Buffer@@PEBI2@Z\t2 (0.98%)\t2 (0.98%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetShaderResources_@$01$03@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11ShaderResourceView@@@Z\t2 (0.98%)\t2 (0.98%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetShaderResources_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11ShaderResourceView@@@Z\t2 (0.98%)\t2 (0.98%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetConstantBuffers1_@$01$03@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11Buffer@@PEBI2@Z\t1 (0.49%)\t1 (0.49%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetSamplers_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11SamplerState@@@Z\t1 (0.49%)\t1 (0.49%)\td3d11\t\n```\n\n\nWith the CL applied:\n```\nFunction Name\tTotal CPU [unit, %]\tSelf CPU [unit, %]\tModule\tCategory\n| + dawn::native::d3d11::CommandBuffer::Execute\t1604 (36.95%)\t7 (0.16%)\tchrome\tKernel\n|| + dawn::native::d3d11::CommandBuffer::ExecuteRenderPass\t1129 (26.01%)\t18 (0.41%)\tchrome\tKernel\n||| - dawn::native::d3d11::CommandBuffer::ExecuteRenderPass::\u003clambda_2\u003e::operator()\t804 (18.52%)\t6 (0.14%)\tchrome\tKernel\n||| + dawn::native::d3d11::BindGroupTracker::~BindGroupTracker\t124 (2.86%)\t2 (0.05%)\tchrome\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_OMSetRenderTargetsAndUnorderedAccessViews_@$01@CContext@@SAXPEAUID3D11DeviceContext5@@IPEBQEAUID3D11RenderTargetView@@PEAUID3D11DepthStencilView@@IIPEBQEAUID3D11UnorderedAccessView@@PEBI@Z\t43 (0.99%)\t43 (0.99%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetShaderResources_@$01$03@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11ShaderResourceView@@@Z\t20 (0.46%)\t20 (0.46%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetConstantBuffers1_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11Buffer@@PEBI2@Z\t16 (0.37%)\t16 (0.37%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetConstantBuffers1_@$01$03@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11Buffer@@PEBI2@Z\t14 (0.32%)\t14 (0.32%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetShaderResources_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11ShaderResourceView@@@Z\t13 (0.30%)\t13 (0.30%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetSamplers_@$01$03@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11SamplerState@@@Z\t8 (0.18%)\t8 (0.18%)\td3d11\t\n|||| - [External Call]\n        ??$TID3D11DeviceContext_SetSamplers_@$01$0A@@CContext@@SAXPEAUID3D11DeviceContext5@@IIPEBQEAUID3D11SamplerState@@@Z\t6 (0.14%)\t6 (0.14%)\td3d11\t\n```",
      "revId": "203453ada7cfc89f0a08537121a9c94fcc95a511",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}