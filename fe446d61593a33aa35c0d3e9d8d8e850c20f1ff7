{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d9b17bd0_02d48c17",
        "filename": "src/dawn/native/CompilationMessages.h",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-02-16T03:24:28Z",
      "side": 1,
      "message": "nit: this name is not that great now since it is refcounted, it doesn\u0027t have a single owner. May as well rename to CompilationMessages\n\nnote that an alternative might be to have the tracked event ref the ShaderModule instead. Then you don\u0027t need to make this one refcounted",
      "range": {
        "startLine": 49,
        "startChar": 6,
        "endLine": 49,
        "endChar": 30
      },
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "935b60bc_0ff46663",
        "filename": "src/dawn/native/CompilationMessages.h",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-02-16T21:08:31Z",
      "side": 1,
      "message": "Great idea to just Ref the ShaderModule! That\u0027s more consistent with the way I made it do it in the wire also so I just did that.",
      "parentUuid": "d9b17bd0_02d48c17",
      "range": {
        "startLine": 49,
        "startChar": 6,
        "endLine": 49,
        "endChar": 30
      },
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73f372e2_30b25e19",
        "filename": "src/dawn/native/ShaderModule.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1424,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-02-16T03:24:28Z",
      "side": 1,
      "message": "nit: need to guard against `mCallback \u003d\u003d nullptr`. Kinda silly to do that, but it is allowed I guess",
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7001ff10_079f68d1",
        "filename": "src/dawn/native/ShaderModule.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1424,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-02-16T21:08:31Z",
      "side": 1,
      "message": "Added the check for now, but I think eventually we should just validate that the callback isn\u0027t nullptr and return `kNullFutureID` if it is instead. (Kinda like if we were to pass an invalid `CallbackMode`.) Otherwise it doesn\u0027t really make sense for any of the async functions. And if users really don\u0027t want to do anything they can pass an empty lambda.",
      "parentUuid": "73f372e2_30b25e19",
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32b4b8f5_19c2c546",
        "filename": "src/dawn/wire/client/EventManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-02-16T03:24:28Z",
      "side": 1,
      "message": "fyi: dawn::native doesn\u0027t let the spontaneous callbacks stay alive.",
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e6d9a4ca_a82690ee",
        "filename": "src/dawn/wire/client/EventManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-02-16T21:08:31Z",
      "side": 1,
      "message": "It\u0027s slightly different in native because the events are ref counted there. Even though the event manager will drop the event in native, the event must be kept alive somewhere else unless it was already \"ready\".",
      "parentUuid": "32b4b8f5_19c2c546",
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c014d1c3_86f11855",
        "filename": "src/dawn/wire/client/ShaderModule.cpp",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-02-16T03:24:28Z",
      "side": 1,
      "message": "nit: I think you only use this helper once. Might be more clear to inline it here.\n\nalso though, your helper always sets mStatus to success. What if mStatus was something else? like you call GetCompilationInfo many times, then drop the server instance so they should all get InstanceDropped (i think)",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 61,
        "endChar": 39
      },
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe6302d9_50c6e241",
        "filename": "src/dawn/wire/client/ShaderModule.cpp",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-02-16T21:08:31Z",
      "side": 1,
      "message": "It\u0027s implicitly called at [1] also, and it\u0027s a bit easier for it to be a helper there instead of inlining it because we can leverage the `SetFutureReady` helper to call `Complete` if its spontaneous also.\n\nThe case you mention shouldn\u0027t be a problem, if the instance is dropped before the callback happens, then `CompleteImpl` will handle it and override the status anyways.",
      "parentUuid": "c014d1c3_86f11855",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 61,
        "endChar": 39
      },
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d5ffef7_ec76ecbf",
        "filename": "src/dawn/wire/client/ShaderModule.cpp",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-02-16T21:08:31Z",
      "side": 1,
      "message": "[1]",
      "range": {
        "startLine": 131,
        "startChar": 8,
        "endLine": 132,
        "endChar": 40
      },
      "revId": "fe446d61593a33aa35c0d3e9d8d8e850c20f1ff7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}