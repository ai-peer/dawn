{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e59c34c4_5ccf1918",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2023-06-13T10:22:37Z",
      "side": 1,
      "message": "PTAL, thanks!",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51e46c7b_8ee86700",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-13T11:53:24Z",
      "side": 1,
      "message": "LGTM overall",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9d6d48d_dcfa953c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-13T14:59:35Z",
      "side": 1,
      "message": "Alan for SPIR-V safety review.",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02f9bf8b_ed04d983",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-13T15:03:08Z",
      "side": 1,
      "message": "I believe Alan discovered that an OOBs **pointers** are undefined behaviour, which might mean that we cannot safely use `robustBufferAccess2` at all.\n\nAlan - please can you confirm.",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "178590db_818c7fe3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1002266
      },
      "writtenOn": "2023-06-13T15:20:54Z",
      "side": 1,
      "message": "The Vulkan robustness features aren\u0027t particularly useful unfortunately. As Ben alludes to SPIR-V says it is undefined behaviour to form an out of bounds logical pointer (the kind tint generates). The Vulkan feature is meant to solve binding too small of a buffer on the API compared to the shader.\n\nThe Vulkan robustness features could potentially help the case where the shader represents the majority the buffer as a runtime array and tint wants to elide calls to arrayLength for bounds checking, but I don\u0027t think it is sufficient to generally remove bounds checks. This would rely on Dawn validating the minBindingSize (which should be the case).",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cf8e0afb_5c050cd5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2023-06-14T02:35:27Z",
      "side": 1,
      "message": "Oh that\u0027s really unfortunate. Does it mean VK_EXT_robustness2 isn\u0027t useful for Dawn and we have to always have index clamping on buffer accesses in the SPIRV binary generated by Tint in the Vulkan backend?",
      "parentUuid": "178590db_818c7fe3",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bae1787c_e02624e9",
        "filename": "src/dawn/native/vulkan/PhysicalDeviceVk.cpp",
        "patchSetId": 6
      },
      "lineNbr": 565,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-13T11:53:24Z",
      "side": 1,
      "message": "Would we be able to use just robustBufferAccess2 or just robustImageAccess2 if one is present and not the other?",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f1ee990_21469468",
        "filename": "src/tint/writer/spirv/generator.h",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-13T11:50:52Z",
      "side": 1,
      "message": "nit: It doesn\u0027t look like this actually enables any SPIR-V extensions, so from the perspective of Tint, I\u0027d replace this with two flags:\n\n```\nbool disable_robustness_storage \u003d false;\nbool disable_robustness_texture \u003d false;\n```\n\nThat way you\u0027re being explicit about what this flag actually does.\n\nI\u0027d move this to below `disable_robustness`, and comment that `disable_robustness` overrules these flags.",
      "range": {
        "startLine": 65,
        "startChar": 9,
        "endLine": 65,
        "endChar": 34
      },
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "465885ab_bdf46e59",
        "filename": "src/tint/writer/spirv/generator.h",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-13T11:53:24Z",
      "side": 1,
      "message": "nit: SPIR-V doesn\u0027t know about this extension. IMHO we could call it skip_image_robustness or something like that.",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4f90a67_f890a1da",
        "filename": "src/tint/writer/spirv/generator_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-13T11:53:24Z",
      "side": 1,
      "message": "The spec for https://registry.khronos.org/vulkan/specs/1.3-extensions/man/html/VkPhysicalDeviceRobustness2FeaturesEXT.html doesn\u0027t say what happens for out of bounds texture stores though. Can you double check that it is dropped in this case?",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c0de7b3_a9507467",
        "filename": "src/tint/writer/spirv/generator_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2023-06-14T03:20:40Z",
      "side": 1,
      "message": "Yes you are right and I fail to find any robustness rules about OpImageWrite, so here I am wrong and we cannot skip textures.",
      "parentUuid": "a4f90a67_f890a1da",
      "revId": "7c0af59904a552f077f7ef078f16da2b4a34b85a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}