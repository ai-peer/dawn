{
  "comments": [
    {
      "key": {
        "uuid": "354d77ce_f55cc04c",
        "filename": "src/dawn_native/metal/DeviceMTL.mm",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2019-03-18T16:55:05Z",
      "side": 1,
      "message": "nit: Would it work to use |addScheduledHandler| and free the command buffer inside there? It would be a little more clear that the command buffers are released promptly instead of having it on either line 168 or 178.",
      "revId": "86c87c0fd1d38d19fc0350062870de550f899b9c",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5d79981_bf83c90c",
        "filename": "src/dawn_native/metal/DeviceMTL.mm",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-03-19T01:55:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "354d77ce_f55cc04c",
      "revId": "86c87c0fd1d38d19fc0350062870de550f899b9c",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b452aa72_af26f4e8",
        "filename": "src/dawn_native/metal/DeviceMTL.mm",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-03-19T14:07:38Z",
      "side": 1,
      "message": "Doing what you suggested makes things fail in weird ways because of some NSAutoReleasePool freeing things already freed or something like this. I was not able to debug it so I went back to the version in patchset 1. This is non-satisfactory but I don\u0027t know how to debug this further at this time.",
      "parentUuid": "d5d79981_bf83c90c",
      "revId": "86c87c0fd1d38d19fc0350062870de550f899b9c",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3863d8af_a754d18f",
        "filename": "src/dawn_native/metal/DeviceMTL.mm",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2019-03-19T15:53:14Z",
      "side": 1,
      "message": "Sounds fine. Though looks like the latest patchset still has the same problem. I think we should check if mLastSubmittedCommands is null before calling waitUntilCompleted?",
      "parentUuid": "b452aa72_af26f4e8",
      "revId": "86c87c0fd1d38d19fc0350062870de550f899b9c",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    }
  ]
}