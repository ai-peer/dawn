{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e185b2a1_1d9c3fd1",
        "filename": "src/tests/end2end/VideoViewsTests_gbm.cpp",
        "patchSetId": 23
      },
      "lineNbr": 30,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2021-12-10T05:35:30Z",
      "side": 1,
      "message": "I made a test CL in chromium to manually roll this dawn change in advance, making sure the CL would not break chromium bots if it were to be landed into dawn. Luckily it caught this error on \"linux-chromeos-rel\":\n1440/6216] CXX obj/third_party/dawn/src/tests/dawn_end2end_tests_sources/VideoViewsTests_gbm.o\nFAILED: obj/third_party/dawn/src/tests/dawn_end2end_tests_sources/VideoViewsTests_gbm.o \npython3 ../../build/toolchain/clang_code_coverage_wrapper.py --target-os\u003dlinux --files-to-instrument\u003d../../.code-coverage/files_to_instrument.txt /b/s/w/ir/cache/goma/client/gomacc ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/third_party/dawn/src/tests/dawn_end2end_tests_sources/VideoViewsTests_gbm.o.d -DDCHECK_ALWAYS_ON\u003d1 -DUSE_UDEV -DUSE_AURA\u003d1 -DUSE_NSS_CERTS\u003d1 -DUSE_OZONE\u003d1 -D_FILE_OFFSET_BITS\u003d64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_GNU_SOURCE -DCR_CLANG_REVISION\u003d\\\"llvmorg-14-init-11564-g37fbf238-3\\\" -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE\u003d2 -D_LIBCPP_ABI_UNSTABLE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_ENABLE_NODISCARD -D_LIBCPP_DEBUG\u003d0 -DCR_LIBCXX_REVISION\u003d79a2e924d96e2fc1e4b937c42efd08898fa472d7 -DCR_SYSROOT_HASH\u003d95051d95804a77144986255f534acb920cee375b -DOS_CHROMEOS -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED\u003d0 -DDAWN_ENABLE_ASSERTS -DDAWN_ENABLE_BACKEND_NULL -DDAWN_ENABLE_BACKEND_VULKAN -DDAWN_USE_X11 -DU_USING_ICU_NAMESPACE\u003d0 -DU_ENABLE_DYLOAD\u003d0 -DUSE_CHROMIUM_ICU\u003d1 -DU_ENABLE_TRACING\u003d1 -DU_ENABLE_RESOURCE_TRACING\u003d0 -DU_STATIC_IMPLEMENTATION -DICU_UTIL_DATA_IMPL\u003dICU_UTIL_DATA_FILE -DGTEST_API_\u003d -DGTEST_HAS_POSIX_RE\u003d0 -DGTEST_LANG_CXX11\u003d1 -DGTEST_HAS_TR1_TUPLE\u003d0 -DGTEST_HAS_ABSL\u003d1 -DUNIT_TEST -I../.. -Igen -I../../buildtools/third_party/libc++ -Igen/third_party/dawn/src -I../../third_party/dawn/src -I../../third_party/perfetto/include -Igen/third_party/perfetto/build_config -Igen/third_party/perfetto -Igen/third_party/dawn/src/include -I../../third_party/dawn/src/include -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/protobuf/src -Igen/protoc_out -I../../third_party/ced/src -I../../third_party/icu/source/common -I../../third_party/icu/source/i18n -I../../third_party/googletest/custom -I../../third_party/googletest/src/googlemock/include -I../../third_party/googletest/src/googletest/include -I../../third_party/dawn/third_party/khronos -fno-delete-null-pointer-checks -fno-ident -fno-strict-aliasing -funwind-tables -fPIC -pthread -fcolor-diagnostics -fmerge-all-constants -fcrash-diagnostics-dir\u003d../../tools/clang/crashreports -mllvm -instcombine-lower-dbg-declare\u003d0 -ffp-contract\u003doff -m64 -march\u003dx86-64 -msse3 -Wno-builtin-macro-redefined -D__DATE__\u003d -D__TIME__\u003d -D__TIMESTAMP__\u003d -ffile-compilation-dir\u003d. -no-canonical-prefixes -Wall -Werror -Wextra -Wimplicit-fallthrough -Wunreachable-code-aggressive -Wthread-safety -Wextra-semi -Wno-missing-field-initializers -Wno-unused-parameter -Wloop-analysis -Wno-unneeded-internal-declaration -Wenum-compare-conditional -Wno-psabi -Wno-ignored-pragma-optimize -Wno-builtin-assume-aligned-alignment -Wshadow -Os -fdata-sections -ffunction-sections -fno-unique-section-names -fno-omit-frame-pointer -g0 -ftrivial-auto-var-init\u003dpattern -fprofile-instr-generate -fcoverage-mapping -mllvm -limited-coverage-experimental\u003dtrue -fno-use-cxa-atexit -fvisibility\u003dhidden -Xclang -add-plugin -Xclang find-bad-constructs -Xclang -plugin-arg-find-bad-constructs -Xclang raw-ptr-template-as-trivial-member -Xclang -plugin-arg-find-bad-constructs -Xclang check-ipc -Wheader-hygiene -Wstring-conversion -Wtautological-overlap-compare -Wno-shadow -DPROTOBUF_ALLOW_DEPRECATED\u003d1 -Wno-inconsistent-missing-override -std\u003dc++17 -Wno-trigraphs -fno-aligned-new -fno-exceptions -fno-rtti -nostdinc++ -isystem../../buildtools/third_party/libc++/trunk/include -isystem../../buildtools/third_party/libc++abi/trunk/include --sysroot\u003d../../build/linux/debian_sid_amd64-sysroot -fvisibility-inlines-hidden -c ../../third_party/dawn/src/tests/end2end/VideoViewsTests_gbm.cpp -o obj/third_party/dawn/src/tests/dawn_end2end_tests_sources/VideoViewsTests_gbm.o\n../../third_party/dawn/src/tests/end2end/VideoViewsTests_gbm.cpp:121:47: error: use of undeclared identifier \u0027GBM_BO_USE_TEXTURING\u0027\n        uint32_t flags \u003d GBM_BO_USE_SCANOUT | GBM_BO_USE_TEXTURING | GBM_BO_USE_HW_VIDEO_DECODER |\n                                              ^\n../../third_party/dawn/src/tests/end2end/VideoViewsTests_gbm.cpp:121:70: error: use of undeclared identifier \u0027GBM_BO_USE_HW_VIDEO_DECODER\u0027\n        uint32_t flags \u003d GBM_BO_USE_SCANOUT | GBM_BO_USE_TEXTURING | GBM_BO_USE_HW_VIDEO_DECODER |\n                                                                     ^\n../../third_party/dawn/src/tests/end2end/VideoViewsTests_gbm.cpp:122:26: error: use of undeclared identifier \u0027GBM_BO_USE_SW_WRITE_RARELY\u0027\n                         GBM_BO_USE_SW_WRITE_RARELY;\n                         ^\n3 errors generated.\n\n\n\n\n\nThe root cause is most likely that the \"gbm.h\" there is too older. It can pass with this workaround.\n\n@Corentin, Let me know if you aren\u0027t okay with this workaround!\n\nThe chromium test CL is https://chromium-review.googlesource.com/c/chromium/src/+/3326681.",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 30,
        "endChar": 0
      },
      "revId": "9dedc7c69f8a3d5e8e99ad3e146dfee17f59e529",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75812ea6_8df8423d",
        "filename": "src/tests/end2end/VideoViewsTests_gbm.cpp",
        "patchSetId": 23
      },
      "lineNbr": 30,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-12-10T09:40:08Z",
      "side": 1,
      "message": "Eww, that\u0027s annoying. Do you know if / when mini GBM will be updated for that bot?\n\nWorkaround LGTM esp. if it is temporary.",
      "parentUuid": "e185b2a1_1d9c3fd1",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 30,
        "endChar": 0
      },
      "revId": "9dedc7c69f8a3d5e8e99ad3e146dfee17f59e529",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}