{
  "comments": [
    {
      "key": {
        "uuid": "85e5642a_51095fe1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 7,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2020-06-03T22:46:23Z",
      "side": 1,
      "message": "Please add a description with details on the code you\u0027re adding.",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 38
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d19272a_5b961c71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 7,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-04T00:02:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "85e5642a_51095fe1",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 38
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ddc9b0a7_50411053",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 491,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "nit: consider std::move to init vectors (vs copy)",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75f8c007_f92e57e1",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 491,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "I tried, but it failed to compile if I added a std::move in front of std::vector\u003c\u003e(). Is this suggestion valid? Any idea to do this?",
      "parentUuid": "ddc9b0a7_50411053",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0036494_a91b9dac",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 491,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-06-03T22:32:21Z",
      "side": 1,
      "message": "I believe the current code will do a move.",
      "parentUuid": "75f8c007_f92e57e1",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2262042e_9c1a6632",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 495,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "unit: consider renaming \"mIsSubResourceValidToDecay\"",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "886cd2bd_d82d3d18",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 495,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done, but moved to the struct.",
      "parentUuid": "2262042e_9c1a6632",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bd1a47be_3c1ad4a3",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 592,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "nit: call reserve(GetSubresourceCount()) to ensure it has capacity",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7989233_5b78b5ff",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 592,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bd1a47be_3c1ad4a3",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c4fa3b4_59f8be6c",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 592,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-06-03T22:32:21Z",
      "side": 1,
      "message": "We should only have to reserve enough for the region specified by the mip level and array layer count arguments. This would reserve much more than necessary for transitioning one subresource.",
      "parentUuid": "c7989233_5b78b5ff",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e98a639_0895d5b6",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 592,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-04T00:02:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2c4fa3b4_59f8be6c",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68992a81_bc365f18",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 601,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "uuunit: \"one\" could also mean one array/mip/plane slice or one set of multiple subresources etc, consider \"TransitionSingleSubresource\" to make this clearer",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f64f0d8_2762529e",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 601,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68992a81_bc365f18",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca2029ce_d498951a",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 626,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "unit: store is never used, consider moving to the end.",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1088d521_20f6eb0b",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 626,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "It\u0027s not correct to move to the end, this function may return in the middle.",
      "parentUuid": "ca2029ce_d498951a",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6ca920b_b15edefc",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 632,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "uunit: rename \"PromotableReadOnlyStates\"",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b40b84a2_ed6408a3",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 632,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6ca920b_b15edefc",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "700657a3_bea689d9",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 639,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "nit: comment needs updating",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20c0b468_2581a217",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 639,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "700657a3_bea689d9",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3138169c_db08096c",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 661,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-06-03T13:10:15Z",
      "side": 1,
      "message": "This does proper handling only in the case of single-subresource depth-stencil textures. I suggest replacing the code with:\n\n        D3D12_RESOURCE_BARRIER barrier;\n        barrier.Type \u003d D3D12_RESOURCE_BARRIER_TYPE_TRANSITION;\n        barrier.Flags \u003d D3D12_RESOURCE_BARRIER_FLAG_NONE;\n        barrier.Transition.pResource \u003d GetD3D12Resource();\n        barrier.Transition.StateBefore \u003d lastState;\n        barrier.Transition.StateAfter \u003d newState;\n        barrier.Transition.Subresource \u003d index;\n\n        // TODO(...) This is a hack because Dawn doesn\u0027t handle subresource of multiplanar resources correctly. We force the transition to be the same for all planes to match what the frontend validation checks for.\n        uint32_t planeCount \u003d IsDepthOrStencil ? 2 : 1\n        for (i \u003d 0 .. planeCount) {\n             barriers-\u003epush_back(barrier);\n             barrier.Transition.Subresource +\u003d GetArrayLayerCount() * GetMipLevelCount();\n        }",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40f5d909_69e57d2f",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 661,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done.\n\nHmm, the current end2end tests can\u0027t distinguish the hacks we did here. The corresponding tests are DepthStencilTests and ClipSpaceTests which have only one mipmap and one layer for a depth/stencil attachment, and SubresourceOutputAttachmentTests which don\u0027t have stencil-only-enabled, so either way of implementations can pass all tests. The current one might be the one which is close to the final solution. let\u0027s revisit this when we add more tests and implement depthonly/stencilonly feature (Dawn:439) and added plane slices for texture.",
      "parentUuid": "3138169c_db08096c",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8425a13c_1a17f5c0",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 702,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-06-03T13:10:15Z",
      "side": 1,
      "message": "This and [1] can be moved in TransitionOneSubresource.",
      "range": {
        "startLine": 697,
        "startChar": 0,
        "endLine": 702,
        "endChar": 0
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "356d2091_46f6e509",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 702,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8425a13c_1a17f5c0",
      "range": {
        "startLine": 697,
        "startChar": 0,
        "endLine": 702,
        "endChar": 0
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28cab948_27437e77",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 726,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-06-03T13:10:15Z",
      "side": 1,
      "message": "u-nit: this could check for wgpu::TextureUsage::None and be done before the call to D3D12TextureUsage, along with a comment explaining that it is for subresources not used during a pass.",
      "range": {
        "startLine": 726,
        "startChar": 20,
        "endLine": 726,
        "endChar": 59
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d16f411d_e59c2c8a",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 726,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "28cab948_27437e77",
      "range": {
        "startLine": 726,
        "startChar": 20,
        "endLine": 726,
        "endChar": 59
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f57b452_019654ac",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 727,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-06-03T13:10:15Z",
      "side": 1,
      "message": "[1]",
      "range": {
        "startLine": 727,
        "startChar": 20,
        "endLine": 727,
        "endChar": 61
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25b523bd_d1a17abb",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 14
      },
      "lineNbr": 727,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f57b452_019654ac",
      "range": {
        "startLine": 727,
        "startChar": 20,
        "endLine": 727,
        "endChar": 61
      },
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d51a6379_8bfdc18e",
        "filename": "src/dawn_native/d3d12/TextureD3D12.h",
        "patchSetId": 14
      },
      "lineNbr": 96,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "uunit: newline",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36eba82e_8a2f157a",
        "filename": "src/dawn_native/d3d12/TextureD3D12.h",
        "patchSetId": 14
      },
      "lineNbr": 96,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d51a6379_8bfdc18e",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab5b86ce_d0c26686",
        "filename": "src/dawn_native/d3d12/TextureD3D12.h",
        "patchSetId": 14
      },
      "lineNbr": 122,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2020-06-03T17:14:15Z",
      "side": 1,
      "message": "nit: consider moving these into a \"state\" struct. It 1) avoids the unnecessary creation of multiple vectors and 2) having to index into them repeatedly.",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "036e3e1b_a915bbec",
        "filename": "src/dawn_native/d3d12/TextureD3D12.h",
        "patchSetId": 14
      },
      "lineNbr": 122,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2020-06-03T20:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab5b86ce_d0c26686",
      "revId": "ae6852f7ee192b1f314bdfd137898bfe5fd40153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    }
  ]
}