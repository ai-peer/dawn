{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a02507d4_fd75f34c",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-04-06T21:14:43Z",
      "side": 1,
      "message": "Rafael, are partial updates to constant buffers allowed if we use CopySubresourceRegion ?",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "272ad6a1_1ad055a6",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2023-04-11T19:51:59Z",
      "side": 1,
      "message": "Partial updates to constant buffers are allowed in D3D11.1.  \n\nSee https://microsoft.github.io/DirectX-Specs/d3d/archive/D3D11_3_FunctionalSpec.htm#5.3.4.3.1%20Partial%20Constant%20Buffer%20Updates.",
      "parentUuid": "a02507d4_fd75f34c",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fba6485_1b8b09e6",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-04-11T20:00:15Z",
      "side": 1,
      "message": "Great to know! some more follow-ups:\n - what about CupySubresourceRegion? can you use it with constant buffers and does it also have partial update restrictions in some versions?\n - d3d11.1 does that map exactly to D3D_FEATURE_LEVEL_11_1? we still have uses on D3D_FEATURE_LEVEL_11_0 so might need a workaround there..",
      "parentUuid": "272ad6a1_1ad055a6",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b68d7934_44ff93c1",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2023-04-11T20:28:21Z",
      "side": 1,
      "message": "@Austin, my understanding is CopySubresourceRegion has always allowed partial resource update. \n\nAs for UpdateSubResource1, you need to check the `ConstantBufferPartialUpdate` field of `D3D11_FEATURE_DATA_D3D11_OPTIONS`, which is retrieved by calling `ID3D11Device::CheckFeatureSupport` with the `D3D11_FEATURE_D3D11_OPTIONS` enum.",
      "parentUuid": "0fba6485_1b8b09e6",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15884cb1_c6006710",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-04-11T20:32:34Z",
      "side": 1,
      "message": "Got it - for now then, Peng, I think it would be simplest to have all buffer copies use CopySubresourceRegion. If we\u0027re writing CPU data, then we can upload it into a staging buffer, then issue a CopySubresourceRegion. Would that work?\nB2T and T2B would still need to do the readback and upload or use a blit.\n\nFor `ConstantBufferPartialUpdate`, let\u0027s add a UMA stat to record how prevalent it is.",
      "parentUuid": "b68d7934_44ff93c1",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2a00e85_e031a7df",
        "filename": "src/dawn/native/d3d11/BufferD3D11.cpp",
        "patchSetId": 5
      },
      "lineNbr": 414,
      "author": {
        "id": 1002331
      },
      "writtenOn": "2023-04-12T20:31:09Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "15884cb1_c6006710",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 414,
        "endChar": 13
      },
      "revId": "09bf0653cd1c0144cdad2f9830cc7c4d4243fbc9",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}