{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "67e7b2e3_c02f2a57",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-11-16T16:10:30Z",
      "side": 0,
      "message": "Instead of removing, why not just drop the `virtual` and define them in terms of the results size: \n\n```\nHasResults() { return !Results().IsEmpty(); }\nHasMultiResults() { return Results().Length() \u003e 1; }\n```\n\nMakes the usage sites clearer as to what is intended.",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d052a08_375a9be7",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1002421
      },
      "writtenOn": "2023-11-16T18:22:47Z",
      "side": 0,
      "message": "Because it\u0027s still hiding the fact they\u0027re expensive virtual function calls, and their existence is encouraging code that will have poor performance. Unlike inlined functions, the compiler can\u0027t tell that two consecutive calls to a virtual function will return the same value.",
      "parentUuid": "67e7b2e3_c02f2a57",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fecf403_0d734e98",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-11-16T18:42:13Z",
      "side": 0,
      "message": "But in the above, they don\u0027t need to be virtual anymore, there is one in the base class.",
      "parentUuid": "9d052a08_375a9be7",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbb825e0_19e23f4b",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-11-16T19:24:53Z",
      "side": 0,
      "message": "But they call a virtual. Maybe I\u0027m not making my argument clear. Having these methods encourage logic like:\n\n```\nif (blah-\u003eHasResults()) {      // \u003c- virtual call\n  auto* res \u003d blah-\u003eResult(0); // \u003c- virtual call\n}\n```\n\ninstead of:\n\n\n```\nif (auto results \u003d blah-\u003eResults(); !results.IsEmpty()) { // \u003c- virtual call\n  auto* res \u003d results[0]; // \u003c- no virtual call\n}\n```",
      "parentUuid": "2fecf403_0d734e98",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd5a20f4_43e6f052",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-11-16T19:58:29Z",
      "side": 0,
      "message": "Sure, I also find the first version of that a _lot_ more readable then the second version. Given the perfmon results are all over the map, do we have any evidence that makes a differnet? (perfmon goes from -15% to +12% so I don\u0027t know if it\u0027s just being wonky, or if it\u0027s really changing results all over the place)",
      "parentUuid": "dbb825e0_19e23f4b",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b2b3c55_e39af322",
        "filename": "src/tint/lang/core/ir/instruction.h",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-11-17T10:25:42Z",
      "side": 0,
      "message": "I gave perfmon a good updating. The numbers are still noisy, but all the IR benchmarks appear to be showing a positive performance gain.",
      "parentUuid": "bd5a20f4_43e6f052",
      "revId": "486aa3328a504054cddf144db647333a4b8502d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}