{
  "comments": [
    {
      "key": {
        "uuid": "1d3c6fea_b56e60a7",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 455,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "I do not think this code is going to work.  You\u0027re mixing immediate state transitions that happen in EnsureSubresourceContentInitialized with batched ones that happen at the end of the for loop. \n\nI think we need to iterate over the loop a couple of times, one to clear render textures on first use and one to do \"normal\" state transitions requested by the developers. \n\nPerhaps later, we should consider whether we want to batch the resource barriers for the clearing operation.",
      "range": {
        "startLine": 443,
        "startChar": 0,
        "endLine": 455,
        "endChar": 13
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "450c059f_fc60681a",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 455,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-06-11T20:24:01Z",
      "side": 1,
      "message": "Also note this will probably have conflicts with https://dawn-review.googlesource.com/c/dawn/+/7920",
      "parentUuid": "1d3c6fea_b56e60a7",
      "range": {
        "startLine": 443,
        "startChar": 0,
        "endLine": 455,
        "endChar": 13
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4477866_698d97c4",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 455,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-11T22:18:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "450c059f_fc60681a",
      "range": {
        "startLine": 443,
        "startChar": 0,
        "endLine": 455,
        "endChar": 13
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88a7ec3f_592eb463",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 637,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "If the source texture is uninitialized, and you just clear the destination, then uninitialized pixels will be copied from the source to the destination right after this.  I think all that is required here is for you to clear the source. Then initialized pixels will be copied to the destination.",
      "range": {
        "startLine": 635,
        "startChar": 0,
        "endLine": 637,
        "endChar": 35
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a37c2e8f_ed049468",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 637,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-11T22:18:18Z",
      "side": 1,
      "message": "This was the case where not the entire destination would be copied to, leaving room for uninitialized areas that should be cleared. The source resource is ensured at line 628, so if it\u0027s uninitialized, it will be cleared before doing the copy.",
      "parentUuid": "88a7ec3f_592eb463",
      "range": {
        "startLine": 635,
        "startChar": 0,
        "endLine": 637,
        "endChar": 35
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6aa50ef6_4561048a",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 637,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-12T00:31:44Z",
      "side": 1,
      "message": "You are correct. I overlooked line 628.",
      "parentUuid": "a37c2e8f_ed049468",
      "range": {
        "startLine": 635,
        "startChar": 0,
        "endLine": 637,
        "endChar": 35
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "666abba4_a835c1de",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 637,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-12T21:28:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6aa50ef6_4561048a",
      "range": {
        "startLine": 635,
        "startChar": 0,
        "endLine": 637,
        "endChar": 35
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80853fc3_44d1f120",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 813,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "Don\u0027t we also need to initialize depth textures if the loadOp\u003d\u003d Load?",
      "range": {
        "startLine": 812,
        "startChar": 20,
        "endLine": 813,
        "endChar": 97
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "477cd1ea_a8cb2ef1",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 813,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-12T21:28:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "80853fc3_44d1f120",
      "range": {
        "startLine": 812,
        "startChar": 20,
        "endLine": 813,
        "endChar": 97
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66979fbb_3f7a1ac0",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 864,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "If all of the textures we will be providing to developers will be initialized before the beginning of the render pass, why do we need to set this state flag at the end of the render pass?\n\nIf we\u0027re not giving developers initialized textures to draw to at the beginning of the render pass, then we need to do so for security.",
      "range": {
        "startLine": 850,
        "startChar": 0,
        "endLine": 864,
        "endChar": 0
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bc6123b_1f332c9e",
        "filename": "src/dawn_native/d3d12/CommandBufferD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 864,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-12T21:28:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "66979fbb_3f7a1ac0",
      "range": {
        "startLine": 850,
        "startChar": 0,
        "endLine": 864,
        "endChar": 0
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d14855d_d694f429",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 306,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "Having fairly generic helper called ClearTexture check the toggle seems wrong. A subsequent person using it as a pure helper will be surprised to discover it does not work as they expect.   \n\nConsider checking the toggle in the caller (EnsureSubresourceContentInitialized) before it calls IsSubresourceContentInitialized.",
      "range": {
        "startLine": 306,
        "startChar": 0,
        "endLine": 306,
        "endChar": 75
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe70df19_afdcb557",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 306,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-11T22:18:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d14855d_d694f429",
      "range": {
        "startLine": 306,
        "startChar": 0,
        "endLine": 306,
        "endChar": 75
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f364977_4f4c8aaf",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 309,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "If you\u0027re clearing depth or stencil, you need to transition to the D3D12_RESOURCE_STATE_DEPTH_WRITE state.",
      "range": {
        "startLine": 309,
        "startChar": 0,
        "endLine": 309,
        "endChar": 62
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12cae3ba_e1e760b1",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 3
      },
      "lineNbr": 309,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-11T22:18:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f364977_4f4c8aaf",
      "range": {
        "startLine": 309,
        "startChar": 0,
        "endLine": 309,
        "endChar": 62
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed9b5489_031bb26f",
        "filename": "src/tests/end2end/TextureZeroInitTests.cpp",
        "patchSetId": 3
      },
      "lineNbr": 258,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2019-06-11T19:57:49Z",
      "side": 1,
      "message": "For the problems I encountered in the change, please add an additional test verification.",
      "range": {
        "startLine": 258,
        "startChar": 0,
        "endLine": 258,
        "endChar": 42
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d17715f7_1c830fd4",
        "filename": "src/tests/end2end/TextureZeroInitTests.cpp",
        "patchSetId": 3
      },
      "lineNbr": 258,
      "author": {
        "id": 1000308
      },
      "writtenOn": "2019-06-12T21:28:32Z",
      "side": 1,
      "message": "WIP going to add testing here https://dawn-review.googlesource.com/c/dawn/+/8140",
      "parentUuid": "ed9b5489_031bb26f",
      "range": {
        "startLine": 258,
        "startChar": 0,
        "endLine": 258,
        "endChar": 42
      },
      "revId": "a1ee4ad5f80a05a3678316277961c9b50c6337f1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    }
  ]
}