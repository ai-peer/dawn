{
  "comments": [
    {
      "key": {
        "uuid": "ab2de470_1097c882",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T09:32:47Z",
      "side": 1,
      "message": "nit: I don\u0027t think this comment is true anymore. Since offset \u003c kMaxVertexAttributeEnd, offset + VertexFormatSize() won\u0027t overflow.",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c803903_ee5b06d7",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2019-03-27T15:44:29Z",
      "side": 1,
      "message": "I also thought this before, but it is probably not true. See the comments here: https://dawn-review.googlesource.com/c/dawn/+/4901/6/src/dawn_native/InputState.cpp#138.",
      "parentUuid": "ab2de470_1097c882",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d755ab5_695790ec",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-03-27T16:17:52Z",
      "side": 1,
      "message": "Yeah the comment doesn\u0027t match things anymore. Looking at the current code it looks like we could have a single check like this that would be guaranteed to not overflow:\n\n            ASSERT(kMaxVertexAttributeEnd \u003e\u003d VertexFormatSize(attribute-\u003eformat));\n            if (attribute-\u003eoffset \u003e kMaxVertexAttributeEnd - VertexFormatSize(attribute-\u003eformat)) {\n                return DAWN_VALIDATION_ERROR(\"Setting attribute offset out of bounds\");\n            }",
      "parentUuid": "7c803903_ee5b06d7",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d2115b6_7ff27d12",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T16:19:53Z",
      "side": 1,
      "message": "(unmarking resolved)\n\nBTW, the code you linked to (InputState.cpp#138 above) isn\u0027t the same as this code; it doesn\u0027t have the (attribute-\u003eoffset \u003e\u003d kMaxVertexAttributeEnd) check, which was added later.",
      "parentUuid": "8d755ab5_695790ec",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03a0b3eb_96d3cb5e",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T16:21:33Z",
      "side": 1,
      "message": "...* added in a later patchset in that CL.",
      "parentUuid": "0d2115b6_7ff27d12",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9bc08b7_8d6ae7af",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2019-03-27T17:01:54Z",
      "side": 1,
      "message": "Well. the comment tried to explained that even you have code snippet 62 - 64 [2], you still need code snippet 59 - 61 [1] to prevent bad things. Because you can pass [2] via data overflow, say offset \u003d 0xFFFFFFFF, VertexFormatSize is 4, then the addition is 3 on 32 bit machine, it might less than kMaxVertexAttributeEnd. So it can pass [2], but actually 0xFFFFFFFF is way too large. It\u0027s invalid. So we still need code snippet 59 - 61 to catch this bad situation. \n\nMaybe I should use this link: https://dawn-review.googlesource.com/c/dawn/+/4901/6..11/src/dawn_native/InputState.cpp. \n\nYou can see that my original code in patchset 6 have already had the logic [2], then I added logic [1] after Corentin\u0027s review, in order to catch the overflow issue above. You can remove [1], and dawn_unittest will fail. (Well, if you remove [2], dawn_unittest also fails, but the comment was added for [1], on the basis that we have already had code snippet [2]. So it\u0027s still useful. \n\nAnyway, the code Corentin suggested can avoid the overflow via subtraction. It is a smarter method. And we don\u0027t need the comment right now.",
      "parentUuid": "03a0b3eb_96d3cb5e",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b605301a_c5ccb7cd",
        "filename": "src/dawn_native/RenderPipeline.cpp",
        "patchSetId": 12
      },
      "lineNbr": 58,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T17:22:24Z",
      "side": 1,
      "message": "Oh, I understand. I thought \"we need to catch it\" meant it was a TODO. Sorry for the confusion!",
      "parentUuid": "a9bc08b7_8d6ae7af",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb6cbefd_233f2f52",
        "filename": "src/dawn_native/d3d12/RenderPipelineD3D12.cpp",
        "patchSetId": 12
      },
      "lineNbr": 399,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T09:32:47Z",
      "side": 1,
      "message": "nit: not used until the end; could be moved down",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9052eaf_b2b8d99c",
        "filename": "src/dawn_native/d3d12/RenderPipelineD3D12.cpp",
        "patchSetId": 12
      },
      "lineNbr": 399,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2019-03-27T15:44:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bb6cbefd_233f2f52",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05bd5aae_dc334bb8",
        "filename": "src/dawn_native/opengl/RenderPipelineGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 204,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T09:32:47Z",
      "side": 1,
      "message": "nit: Can IterateBitSet be used here?",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c9a6a6e_f6a472a8",
        "filename": "src/dawn_native/opengl/RenderPipelineGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 204,
      "author": {
        "id": 1000017
      },
      "writtenOn": "2019-03-27T15:44:29Z",
      "side": 1,
      "message": "How about keep the logic exactly the same as the code snippet in InputStateGL.cpp, but revisit it in my follow-up patch, because this big change looks like a code refactoring. And let\u0027s merge it in order to avoid code rebase.",
      "parentUuid": "05bd5aae_dc334bb8",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b3535862_54152d4f",
        "filename": "src/dawn_native/opengl/RenderPipelineGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 204,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2019-03-27T16:19:53Z",
      "side": 1,
      "message": "Ack, please do revisit it so we don\u0027t forget about it.",
      "parentUuid": "1c9a6a6e_f6a472a8",
      "revId": "c74f4d7b07535ec698f4f8682fc308e5b0c99d3d",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    }
  ]
}