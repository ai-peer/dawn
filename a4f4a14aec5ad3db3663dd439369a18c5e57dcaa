{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1960a9cc_064c8b18",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1003581
      },
      "writtenOn": "2024-04-24T14:54:47Z",
      "side": 1,
      "message": "Addressed some feedback, please take another look.",
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8440140_35c05dfb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-04-24T21:24:16Z",
      "side": 1,
      "message": "overall LGTM",
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03b9494b_17832d91",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-04-24T21:24:16Z",
      "side": 1,
      "message": "is the fact that you\u0027re using an array texture relevant? it looks like you always call Create2DArrayTexture with arrayLayerCount\u003d1\n\nif use of arrays is important, you should have some tests which create the texture with more than one array layer, and then create a view of \n - all the array layers\n - just one layer at baseArrayLayer \u003d 0\n - just one layer at baseArrayLayer \u003d 1",
      "range": {
        "startLine": 42,
        "startChar": 14,
        "endLine": 42,
        "endChar": 34
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73b73df9_ebf4f5d9",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1003581
      },
      "writtenOn": "2024-04-24T22:01:43Z",
      "side": 1,
      "message": "Ah no, the array texture is irrelevant here. Update to remove the unnecessary params and rename method.",
      "parentUuid": "03b9494b_17832d91",
      "range": {
        "startLine": 42,
        "startChar": 14,
        "endLine": 42,
        "endChar": 34
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d3882cd_eb2a9244",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-04-24T22:23:17Z",
      "side": 1,
      "message": "the same goes for the mip levels too. you\u0027re making textures with 6 mip levels, and a view of all 6 mip levels. I went to check the vulkan spec and saw this:\n\n\n\u003e Images created with one of the formats that require a sampler Y′CBCR conversion, have further restrictions on their limits and capabilities compared to images created with other formats. Creation of images with a format requiring Y′CBCR conversion may not be supported unless other parameters meet all of the constraints:\n - imageType is VK_IMAGE_TYPE_2D\n - mipLevels is 1\n - arrayLayers is 1, unless the ycbcrImageArrays feature is enabled, or otherwise indicated by VkImageFormatProperties::maxArrayLayers, as returned by vkGetPhysicalDeviceImageFormatProperties\n - samples is VK_SAMPLE_COUNT_1_BIT\n\nhttps://registry.khronos.org/vulkan/specs/1.3-extensions/man/html/VkImageCreateInfo.html\n\nWe can only make an image that requires Y′CBCR conversion through SharedTextureMemory - and shared texture memory already requires 2D, single mip single layer textures. So we should be good on that front.\n\nThe Vulkan spec doesn\u0027t really say (or I couldn\u0027t find it) exactly whether creating a VkImageView with Ycbcr with multiple mips/layers is allowed when the original image *does not* require ycbcr conversion. Just an FYI but later I think we should either: \n - verify you can make an RGBA8unorm texture with multiple subresources, and then make an image view of various subsets of those subresources.\n - or ^validate that is not allowed. which could be as simple as saying that if ycbcr, the source texture must have a single subresource, and the view dimension must be 2d",
      "parentUuid": "73b73df9_ebf4f5d9",
      "range": {
        "startLine": 42,
        "startChar": 14,
        "endLine": 42,
        "endChar": 34
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58bfe808_97f1ad7b",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1003581
      },
      "writtenOn": "2024-04-25T17:26:14Z",
      "side": 1,
      "message": "Sounds good, I\u0027ve added a todo here for this validation/testing and an handle it in follow-up. I\u0027ve updated the mip levels to 1 for now.",
      "parentUuid": "0d3882cd_eb2a9244",
      "range": {
        "startLine": 42,
        "startChar": 14,
        "endLine": 42,
        "endChar": 34
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b743d73e_0e53b111",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 145,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-04-24T21:24:16Z",
      "side": 1,
      "message": "nit: in all of these, you probably mean binding validation, not texture view creation",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 145,
        "endChar": 21
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80428c25_eedbaa53",
        "filename": "src/dawn/tests/unittests/validation/YCbCrSamplerValidationTests.cpp",
        "patchSetId": 9
      },
      "lineNbr": 145,
      "author": {
        "id": 1003581
      },
      "writtenOn": "2024-04-24T22:01:43Z",
      "side": 1,
      "message": "Right, updated.",
      "parentUuid": "b743d73e_0e53b111",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 145,
        "endChar": 21
      },
      "revId": "a4f4a14aec5ad3db3663dd439369a18c5e57dcaa",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}