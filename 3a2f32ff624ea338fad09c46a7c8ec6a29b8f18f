{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a356bcac_a2927103",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 45
      },
      "lineNbr": 0,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T06:16:56Z",
      "side": 1,
      "message": "PTAL again",
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46e57035_6e846168",
        "filename": "src/dawn/native/CreatePipelineAsyncTask.cpp",
        "patchSetId": 45
      },
      "lineNbr": 126,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-03-21T21:59:36Z",
      "side": 1,
      "message": "Hmm do we need the device lock here also? Otherwise maybe we could race?",
      "range": {
        "startLine": 126,
        "startChar": 4,
        "endLine": 126,
        "endChar": 27
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "520d110e_dd91e342",
        "filename": "src/dawn/native/CreatePipelineAsyncTask.cpp",
        "patchSetId": 45
      },
      "lineNbr": 126,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T22:39:02Z",
      "side": 1,
      "message": "Yes, this is to fix a device lost test IIRC",
      "parentUuid": "46e57035_6e846168",
      "range": {
        "startLine": 126,
        "startChar": 4,
        "endLine": 126,
        "endChar": 27
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be842262_fd59a7e5",
        "filename": "src/dawn/native/CreatePipelineAsyncTask.cpp",
        "patchSetId": 45
      },
      "lineNbr": 126,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-03-21T22:54:32Z",
      "side": 1,
      "message": "Hmm, to clarify, I mean right now we don\u0027t hold the lock here, so it\u0027s possible that we are not lost when the check at line 126 happens, so we skip this logic, but then the device gets lost afterwards, say at line 138 or something.\n\nI think that this might be a larger issue that just here though... I think all the device related callbacks that need to verify if the device is lost have a potential race right now... Maybe just a comment here that details that we are aware this could race?",
      "parentUuid": "520d110e_dd91e342",
      "range": {
        "startLine": 126,
        "startChar": 4,
        "endLine": 126,
        "endChar": 27
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84870107_7ae6ef1a",
        "filename": "src/dawn/native/CreatePipelineAsyncTask.cpp",
        "patchSetId": 45
      },
      "lineNbr": 126,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T23:39:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be842262_fd59a7e5",
      "range": {
        "startLine": 126,
        "startChar": 4,
        "endLine": 126,
        "endChar": 27
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed1d8314_22b2f6e4",
        "filename": "src/dawn/tests/end2end/DeviceLifetimeTests.cpp",
        "patchSetId": 45
      },
      "lineNbr": 362,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-03-21T21:59:36Z",
      "side": 1,
      "message": "Fine for now, but add a TODO for these tests for a follow up. I think that this test should eventually be updated to:\n\n1) Call the new API using a `CallbackInfo`\n2) Use spontaneous mode\n3) Shouldn\u0027t need the last `ProcessEvents` call once that\u0027s all done because the device should be tracking all the pipeline events, and when it\u0027s last external ref is gone, it should call `SetFutureReady` on all of them with device lost.",
      "range": {
        "startLine": 361,
        "startChar": 4,
        "endLine": 362,
        "endChar": 29
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "570fc16a_707f3f67",
        "filename": "src/dawn/tests/end2end/DeviceLifetimeTests.cpp",
        "patchSetId": 45
      },
      "lineNbr": 362,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T22:39:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed1d8314_22b2f6e4",
      "range": {
        "startLine": 361,
        "startChar": 4,
        "endLine": 362,
        "endChar": 29
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "692d58d0_494c7a50",
        "filename": "src/dawn/tests/end2end/DeviceLostTests.cpp",
        "patchSetId": 45
      },
      "lineNbr": 477,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-03-21T21:59:36Z",
      "side": 1,
      "message": "Same comment here. We should be using the new API in spontaneous mode when possible.",
      "range": {
        "startLine": 475,
        "startChar": 4,
        "endLine": 477,
        "endChar": 34
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e27cbde_854da06f",
        "filename": "src/dawn/tests/end2end/DeviceLostTests.cpp",
        "patchSetId": 45
      },
      "lineNbr": 477,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T22:39:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "692d58d0_494c7a50",
      "range": {
        "startLine": 475,
        "startChar": 4,
        "endLine": 477,
        "endChar": 34
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e04da97_9c667e7a",
        "filename": "webgpu-cts/expectations.txt",
        "patchSetId": 45
      },
      "lineNbr": 821,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-03-21T21:59:36Z",
      "side": 1,
      "message": "Hmm interesting that these are failing now... Do you know if they are actually directly related to the change? Or did the change expose something entirely different?",
      "range": {
        "startLine": 819,
        "startChar": 0,
        "endLine": 821,
        "endChar": 155
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9a65d8c3_581d2599",
        "filename": "webgpu-cts/expectations.txt",
        "patchSetId": 45
      },
      "lineNbr": 821,
      "author": {
        "id": 1000685
      },
      "writtenOn": "2024-03-21T22:39:02Z",
      "side": 1,
      "message": "These tests call `CreateComputePipelineAsync` so is likely related. It is pretty obvious these tests are very likely to time out.(~3 out of 4)\nBut they themselves are pretty flaky (According to the luci similiar failure page).\nAnd they seem to pass on pixel 4. So just suppress them first.",
      "parentUuid": "5e04da97_9c667e7a",
      "range": {
        "startLine": 819,
        "startChar": 0,
        "endLine": 821,
        "endChar": 155
      },
      "revId": "3a2f32ff624ea338fad09c46a7c8ec6a29b8f18f",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}