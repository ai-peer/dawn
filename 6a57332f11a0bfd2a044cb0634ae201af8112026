{
  "comments": [
    {
      "key": {
        "uuid": "f4cdc16e_3540ecf1",
        "filename": "src/utils/TerribleCommandBuffer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-11-04T14:08:18Z",
      "side": 1,
      "message": "nit: ASSERT the invariant.",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8776b321_df1b58f3",
        "filename": "src/utils/TerribleCommandBuffer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2019-11-05T01:03:36Z",
      "side": 1,
      "message": "Sry but I\u0027m confusing about which should I ASSERT ? Do you mean ASSERT size is not 0?",
      "parentUuid": "f4cdc16e_3540ecf1",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "511f63cf_9e8fbe0f",
        "filename": "src/utils/TerribleCommandBuffer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2019-11-05T02:25:22Z",
      "side": 1,
      "message": "Corentin means to ASSERT \"that we can\u0027t have commands in mBuffer and mLargeBuffer at the same time\"",
      "parentUuid": "8776b321_df1b58f3",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b508622_8d82716b",
        "filename": "src/utils/TerribleCommandBuffer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2019-11-05T07:46:03Z",
      "side": 1,
      "message": "Thanks for explain!Done.",
      "parentUuid": "511f63cf_9e8fbe0f",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b0b2c04_8154be64",
        "filename": "src/utils/TerribleCommandBuffer.cpp",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-11-04T14:08:18Z",
      "side": 1,
      "message": "ditto",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c730f4b5_9311260d",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-11-04T14:08:18Z",
      "side": 1,
      "message": "nit: explain that the invariant is that we can\u0027t have commands in mBuffer and mLargeBuffer at the same time.\n\nAlso maybe we could reduce the size of the buffer slightly (1MB?)",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab4f324d_1a2c7c85",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2019-11-05T01:03:36Z",
      "side": 1,
      "message": "Reduce mBuffer size to 1MB means that more buffer uploading operation will go to the mLargeBuffer, which will increase flushing times and possible resize times. I\u0027m not sure whether this will hurt performance a lot.",
      "parentUuid": "c730f4b5_9311260d",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebf25da7_58b45839",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2019-11-05T02:25:22Z",
      "side": 1,
      "message": "I don\u0027t think that TerribleCommandBuffer is intended to be particularly performant. We only use it for tests. If we are concerned about performance, then I think we should have the buffer be dynamically sized and grow/shrink it based on how much space is needed.",
      "parentUuid": "ab4f324d_1a2c7c85",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de3ba0d7_2430cb56",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2019-11-05T07:46:03Z",
      "side": 1,
      "message": "Austin@ : Thanks for explain! However I\u0027m a little confused why dynamic mBuffer has better performance? Is it need more memory access?\n\nBTW, when I change the size to 1MB, an interesting thing happens. ManySetSubdata case crashed. I\u0027m looking into it.",
      "parentUuid": "ebf25da7_58b45839",
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "721a1ed5_ebfb40e5",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2019-11-04T14:08:18Z",
      "side": 1,
      "message": "The actual value is never used, all we check is whether it is zero, so it could be replaced by a boolean.",
      "range": {
        "startLine": 39,
        "startChar": 15,
        "endLine": 39,
        "endChar": 34
      },
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94b43280_751de2c1",
        "filename": "src/utils/TerribleCommandBuffer.h",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2019-11-05T01:03:36Z",
      "side": 1,
      "message": "Sry but I think this value is useful. It used as the length parameter for HandleCommands function. It prevents unnecessary vector resize operation. So I\u0027d like to keep it if you agree.",
      "parentUuid": "721a1ed5_ebfb40e5",
      "range": {
        "startLine": 39,
        "startChar": 15,
        "endLine": 39,
        "endChar": 34
      },
      "revId": "6a57332f11a0bfd2a044cb0634ae201af8112026",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    }
  ]
}