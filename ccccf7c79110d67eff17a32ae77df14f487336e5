{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "763cca7f_31a8a6b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-02-25T16:47:27Z",
      "side": 1,
      "message": "@Corentin and @Bryan, please take a look.",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1fc315a8_83c4d174",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2021-02-25T19:40:12Z",
      "side": 1,
      "message": "LGTM",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "507dcebe_435e0394",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2021-02-25T19:40:12Z",
      "side": 1,
      "message": "nit: this doesn\u0027t matter for internal textures, correct? If so, could also consider checking \"if external { /*clean-up external only stuff*/ }\" to make this more obvious.",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d6f888c_d2d17f90",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-02-25T21:55:12Z",
      "side": 1,
      "message": "For the D3D12 backend, external textures do not need special treatment with regard to cleanup. You simply release your references if you no longer need them. \n\nGiven this, I\u0027d rather keep the current code I have.",
      "parentUuid": "507dcebe_435e0394",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e75e4e0e_c54efa82",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2021-02-25T22:12:30Z",
      "side": 1,
      "message": "I was referring to the clean-up below (ln:585 and ln:594) which only runs when this is an external texture. Once texture is Destroyed, it\u0027s still Invalid. No strong preference.",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27b1a320_61e92a73",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-02-25T22:32:48Z",
      "side": 1,
      "message": "Swapchain textures, today, are always external. But they may not be in the future. \n\nThe DXGI keyed mutex will be present when we have an external texture.  \n\nI think the important thing is to clean up things if they\u0027re present. If you prefer, I can move the \u0027if GetInfo\u0027 if statement to encompass both the \u0027if swapchain\u0027 and \u0027Deallocate\u0027 statements.",
      "parentUuid": "e75e4e0e_c54efa82",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20e5d142_827b66e5",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000268
      },
      "writtenOn": "2021-02-26T01:25:43Z",
      "side": 1,
      "message": "The \"if GetInfo\" also SGTM, your call.",
      "parentUuid": "27b1a320_61e92a73",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6c4db59_4cb60491",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2021-02-26T08:27:22Z",
      "side": 1,
      "message": "Would it also work to unset |mSwapChainTexture| and |mDxgiKeyedMutex| after they are Presented / Released below? It may be a more direct way to solve the issue as the current CL sort of relies on some implementation details of the allocator.",
      "parentUuid": "20e5d142_827b66e5",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "677739c1_9fc8cac3",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-02-26T20:35:09Z",
      "side": 1,
      "message": "@Austin, we std::move mDxgiKeyedMutex to ReleaseMutexForTexture so it does get unset at the end of the call.\n\nThe call to Present calls mResourceAllocation.GetD3D12Resource(), so it needs to rely on the validity of mResourceAllocation to do its job.\n\nI\u0027ll put up a new patch which removes the GetInfo call and, instead, sets mSwapChainTexture to false after the DeallocateMemory call. That should avoid the crash and keeps the member variables internally consistent.",
      "parentUuid": "c6c4db59_4cb60491",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fd6b2fe6_b83d2d20",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-03-02T17:47:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d6f888c_d2d17f90",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "804a3e87_5390938e",
        "filename": "src/dawn_native/d3d12/TextureD3D12.cpp",
        "patchSetId": 1
      },
      "lineNbr": 573,
      "author": {
        "id": 1000262
      },
      "writtenOn": "2021-03-02T17:47:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "677739c1_9fc8cac3",
      "revId": "ccccf7c79110d67eff17a32ae77df14f487336e5",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}