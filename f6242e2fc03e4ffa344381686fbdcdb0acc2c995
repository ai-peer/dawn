{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b412a7f1_800ac8c7",
        "filename": "src/tint/ir/function.h",
        "patchSetId": 15
      },
      "lineNbr": 83,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-26T20:29:57Z",
      "side": 1,
      "message": "I needed the ability to clear these optional fields, which can\u0027t be done with the existing setters. If making these getters return references is too gross I can either:\n1. Add `ClearWorkgroup`/`ClearBuiltin`/etc methods to clear the optional fields\n2. Change the existing setters to take a `std::optional`",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8274f626_a0059ee8",
        "filename": "src/tint/ir/function.h",
        "patchSetId": 15
      },
      "lineNbr": 83,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "I think I\u0027d prefer the `ClearWorkgroup` method to returning a ref. Or adding an override which takes an `optional`.",
      "parentUuid": "b412a7f1_800ac8c7",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8fd8cdf_0e05639b",
        "filename": "src/tint/ir/function.h",
        "patchSetId": 15
      },
      "lineNbr": 83,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T10:24:40Z",
      "side": 1,
      "message": "`ClearWorkgroupSize` works for me.",
      "parentUuid": "8274f626_a0059ee8",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73881b97_5f8dd86e",
        "filename": "src/tint/ir/function.h",
        "patchSetId": 15
      },
      "lineNbr": 83,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Added `ClearWorkgroupSize`, `ClearBuiltin`, etc.",
      "parentUuid": "e8fd8cdf_0e05639b",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ff7351b_2fc6c692",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 70,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T10:24:40Z",
      "side": 1,
      "message": "Maybe we should kill `FunctionParam::Builtin` and `Function::ReturnBuiltin` and just use `builtin::BuiltinValue`?",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 70,
        "endChar": 1
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0af7640a_e57d308f",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 70,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-27T14:40:47Z",
      "side": 1,
      "message": "I\u0027d prefer not as this limits the things that can go in there instead of having to check the entire list and ignore a whole bunch.",
      "parentUuid": "2ff7351b_2fc6c692",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 70,
        "endChar": 1
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f63c2bfd_0d11de4a",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 70,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Didn\u0027t change this one yet. I don\u0027t really care either way, and I\u0027m not sure which of you feels strongest :-)",
      "parentUuid": "0af7640a_e57d308f",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 70,
        "endChar": 1
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a2720430_23fd6900",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 70,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T21:38:22Z",
      "side": 1,
      "message": "I was under the impression that some of the transforms would be using builtins that go beyond the WGSL-permitted builtins (e.g. point size). In which case the limits don\u0027t give you all that much.\nAnyway, not one to block this change.",
      "parentUuid": "f63c2bfd_0d11de4a",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 70,
        "endChar": 1
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "088dbe0d_96086a50",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 109,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "TINT_SCOPED_ASSIGNMENT instead of assign and then DEFER?",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e06648d_f171c2a6",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 109,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Apparently `TINT_SCOPED_ASSIGNMENT` doesn\u0027t work for unique_ptr?\n\nUsed it for the function pointer though.",
      "parentUuid": "088dbe0d_96086a50",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88baa331_dfa081c6",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 109,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T21:38:22Z",
      "side": 1,
      "message": "Interesting. I\u0027ll take a look at this. Don\u0027t let this block your change.",
      "parentUuid": "6e06648d_f171c2a6",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c3a13e0_377fa316",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 139,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "I wonder if it would be useful to make `Return` allow a `nullptr` in the second param and treat that is no return value? Then this would just be a one liner instead of the whole if-dance.",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77dae441_ef898fd3",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 139,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "How can you distinguish between no return value vs return `undef`? Now, if we had an explicit `UndefValue`... ðŸ˜Š",
      "parentUuid": "3c3a13e0_377fa316",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5555a5b4_7faa867e",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 139,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T21:38:22Z",
      "side": 1,
      "message": "Why would you return undef?",
      "parentUuid": "77dae441_ef898fd3",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f546a53_d54cff7a",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 181,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "```\nif (func-\u003eReturnType()-\u003eIs\u003ctype::Void\u003e()) {\n   return backend-\u003eFinalizeOutputs();\n}\n```",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6dc374e0_fec08c26",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 181,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Pulled the `Finalize*` steps out to the main function instead. Feels better there anyway.",
      "parentUuid": "5f546a53_d54cff7a",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1050f7fe_7352afc2",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 184,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "Would it be useful to pull the name `Symbol` generation out to a helper as it\u0027s the same between input and output?",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d48f6f6e_cf16860f",
        "filename": "src/tint/ir/transform/shader_io.cc",
        "patchSetId": 15
      },
      "lineNbr": 184,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Not sure whether that\u0027s better or not, since it\u0027s a one liner and we only do it twice.",
      "parentUuid": "1050f7fe_7352afc2",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a4e9536_ae2afaab",
        "filename": "src/tint/ir/transform/shader_io_spirv.cc",
        "patchSetId": 15
      },
      "lineNbr": 62,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "nit: `and global variables for them`",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcc0e891_e6320e2b",
        "filename": "src/tint/ir/transform/shader_io_spirv.cc",
        "patchSetId": 15
      },
      "lineNbr": 62,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a4e9536_ae2afaab",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df069e69_01e4bbd3",
        "filename": "src/tint/ir/transform/shader_io_spirv.cc",
        "patchSetId": 15
      },
      "lineNbr": 98,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "This one and the one on line 108 both have the same prefix as their usage in the `ir-\u003eSetName` call just, minus the `Struct`",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7d9cf06_2a98dc91",
        "filename": "src/tint/ir/transform/shader_io_spirv.cc",
        "patchSetId": 15
      },
      "lineNbr": 98,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Pulled the common stuff out into a lambda.",
      "parentUuid": "df069e69_01e4bbd3",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa461195_a7d000cb",
        "filename": "src/tint/ir/transform/shader_io_spirv.h",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T10:24:40Z",
      "side": 1,
      "message": "I don\u0027t think this is doing anything.\nSuggest replacing `ShaderIOSpirv::State` with a `tint::ir::transform::\u003canonymous\u003e::StateImpl` struct in the .cc file.",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 37,
        "endChar": 17
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8673c8f9_2d2beff6",
        "filename": "src/tint/ir/transform/shader_io_spirv.h",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Had to make `ShaderIO::BackendState` public for this to work, but OK, done.",
      "parentUuid": "aa461195_a7d000cb",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 37,
        "endChar": 17
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d749ec7e_77002e0e",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 528,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T10:24:40Z",
      "side": 1,
      "message": "argh, I didn\u0027t notice this coming back after the value / instruction split.\nMaybe we should subclass `ir::InstructionValue` with a class that has a pointer type.",
      "range": {
        "startLine": 528,
        "startChar": 24,
        "endLine": 528,
        "endChar": 66
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb5bb731_a5505b5d",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 529,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "invert and `continue` ?",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "841e6c09_b455b3c8",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 529,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fb5bb731_a5505b5d",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c253fd27_b0e41e70",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 538,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T10:24:40Z",
      "side": 1,
      "message": "We probably should add the `Function*` to `Block`.",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 538,
        "endChar": 49
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d297be3e_83ab248e",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 538,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-27T14:40:47Z",
      "side": 1,
      "message": "+1, was thinking the same thing.",
      "parentUuid": "c253fd27_b0e41e70",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 538,
        "endChar": 49
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2e8b2f2a_6211d3a1",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 538,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Could do, but that\u0027s potentially a bunch of overhead whenever you add/remove an instruction from a block. e.g. that instruction may contain a control instruction, so you have to recursively update the Function* parent for every block inside it.",
      "parentUuid": "d297be3e_83ab248e",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 538,
        "endChar": 49
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3fc3b95_5ab30cdf",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 538,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-27T21:38:22Z",
      "side": 1,
      "message": "The alternative is a helper on `Instruction` and `Block` to do the parent / block walking like what you\u0027re doing.\nWe\u0027d need to have the function\u0027s block be a new class derived from `Block` (`FunctionBlock`?) which has a pointer back to the owning function.",
      "parentUuid": "2e8b2f2a_6211d3a1",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 538,
        "endChar": 49
      },
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58a49cdf_c606c52e",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 543,
      "author": {
        "id": 1000257
      },
      "writtenOn": "2023-06-26T21:51:30Z",
      "side": 1,
      "message": "ditto, invert and continue?",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ac4d41e_442dca8a",
        "filename": "src/tint/writer/spirv/ir/generator_impl_ir.cc",
        "patchSetId": 15
      },
      "lineNbr": 543,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-06-27T20:39:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "58a49cdf_c606c52e",
      "revId": "f6242e2fc03e4ffa344381686fbdcdb0acc2c995",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}