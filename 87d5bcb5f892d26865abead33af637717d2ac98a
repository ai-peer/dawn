{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "056883fe_e4c078b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2023-07-31T11:21:10Z",
      "side": 1,
      "message": "PTAL, thanks!",
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a096c7cc_2d68749c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2023-08-01T00:16:13Z",
      "side": 1,
      "message": "I\u0027ve got the idea from ANGLE:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/angle/src/libANGLE/renderer/vulkan/BufferVk.cpp;l\u003d84\n\nI think VK_MEMORY_PROPERTY_HOST_CACHED_BIT can also help Dawn in the same way.\n\nPTAL, thanks!",
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e682c8c6_47950b1d",
        "filename": "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-08-01T03:11:33Z",
      "side": 1,
      "message": "this means though if the application ever reads from it, it will be vey very slow.\n\nCurrently, we have MapWrite return the previous contents of the buffer - so it\u0027s possible the application might actually do this on purpose.\n\nMaybe we could consider having a separate map mode which is MapWriteUncached ?\n+kainino WDYT?",
      "range": {
        "startLine": 317,
        "startChar": 8,
        "endLine": 323,
        "endChar": 9
      },
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fac521c_9ddc9e9a",
        "filename": "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2023-08-01T18:50:25Z",
      "side": 1,
      "message": "Do you mean in the JS spec? Until we have triple mapping, I don\u0027t think we need it - if JS reads from a WRITE mapping it\u0027s actually just from shmem. Also, it might actually be misleading because devs would not see the slowness in practice until we implement triple mapping.\n\nAnd if we can possible get write-only ArrayBuffers then we won\u0027t have a need for it in JS at all.\n\nTo confirm what I think you mean:\n- GPUMapMode.WRITE - write is fast, read is fast\n- You\u0027re suggesting adding:\n  GPUMapMode.WRITE_UNCACHED - write is fast, read may be slow\n\nAll that said we can certainly add WRITE_UNCACHED and even WRITE_ONLY (unsafe) in the native API if it\u0027s helpful.",
      "parentUuid": "e682c8c6_47950b1d",
      "range": {
        "startLine": 317,
        "startChar": 8,
        "endLine": 323,
        "endChar": 9
      },
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6821aff5_4ec7ffad",
        "filename": "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-08-01T18:52:17Z",
      "side": 1,
      "message": "yes - suggesting adding WriteOnly or WriteUncached in native",
      "parentUuid": "5fac521c_9ddc9e9a",
      "range": {
        "startLine": 317,
        "startChar": 8,
        "endLine": 323,
        "endChar": 9
      },
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41336de0_b5d91bec",
        "filename": "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2023-08-01T19:51:33Z",
      "side": 1,
      "message": "WriteOnly or WriteUncached in native sounds good to me, and we should be able to use it in chrome.",
      "parentUuid": "6821aff5_4ec7ffad",
      "range": {
        "startLine": 317,
        "startChar": 8,
        "endLine": 323,
        "endChar": 9
      },
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69fc0990_6200b0da",
        "filename": "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-08-01T21:07:47Z",
      "side": 1,
      "message": "That could work, and Chromium would likely use that if MapRead isn\u0027t specified along with it so that with non-temporal stores the writes would be faster?",
      "parentUuid": "e682c8c6_47950b1d",
      "range": {
        "startLine": 317,
        "startChar": 8,
        "endLine": 323,
        "endChar": 9
      },
      "revId": "87d5bcb5f892d26865abead33af637717d2ac98a",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}