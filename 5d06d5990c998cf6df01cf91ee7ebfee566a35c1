{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b8ea983b_79e280a3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1001591
      },
      "writtenOn": "2021-04-01T17:47:10Z",
      "side": 1,
      "message": "Temporarily stripped out the unit test that was causing the failure after realizing why it couldn\u0027t work with --use-wire. Want to make sure it builds everywhere first.",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16342cc4_d98f77da",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2021-04-01T18:00:48Z",
      "side": 1,
      "message": "Why was it? At a brief look, it looks like you may have been missing a WaitForAllOperations(device)",
      "parentUuid": "b8ea983b_79e280a3",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2154658_0170fb24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2021-04-01T18:00:48Z",
      "side": 1,
      "message": "Looks good overall",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "999eb141_e0bb4457",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1001591
      },
      "writtenOn": "2021-04-01T19:11:30Z",
      "side": 1,
      "message": "Because I was reinterpret casting the ShaderModule to ShaderModuleBase in order to get to the testing-only methods. It\u0027s my assumption that on the client side of the wire ShaderModule is not actually backed by ShaderModuleBase.\n\nHonestly I\u0027m not entirely sure what the right way to test this feature is. Even injecting testing messages feels like it\u0027s missing a crucial step, but I\u0027m not sure we want to rely on Tint\u0027s message output to never change.",
      "parentUuid": "16342cc4_d98f77da",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "39cfcf0e_55b5ceb5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2021-04-01T19:54:37Z",
      "side": 1,
      "message": "Right, well I think the basic injected messages works for testing the basic functionality in Dawn native. You could just DAWN_SKIP_TEST_IF(UsesWire()); there. \n\nI agree it\u0027s tough to rely on Tint\u0027s message output. Perhaps AddCompilationMessageForTesting could take a tint::diag instead so that as long as tint returns something valid from Diagnostics() we should be good? Tint should have its own testing of whether Diagnostics contains the right thing.\n\nThen, for the wire, we test callbacks by using mocks. See WireErrorCallbackTests, WireBufferMappingTests, WireCreateRenderPipelineAsnycTests, etc... the gist of it is that we would call getCompilationInfo(), and then mock the response on the server side. We then want to check the response made it back to the client correctly.",
      "parentUuid": "999eb141_e0bb4457",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1a19eb8d_28a183d4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1001591
      },
      "writtenOn": "2021-04-01T20:27:40Z",
      "side": 1,
      "message": "Thanks for explaining! Added the original test back in with a wire skip, I\u0027ll work on a wire version with some mocks.",
      "parentUuid": "39cfcf0e_55b5ceb5",
      "revId": "5d06d5990c998cf6df01cf91ee7ebfee566a35c1",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}