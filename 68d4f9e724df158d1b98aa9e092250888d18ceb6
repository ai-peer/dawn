{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3905b81a_1576d50c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2024-06-10T23:14:48Z",
      "side": 1,
      "message": "This fixes the race problem, but doesn\u0027t fix the potential deadlock problem (device.destroy() + ProcessEvents) - can look at that problem separately.\n\n\nit also looks like there is some flake found by the tests in libnvidia-glvkspirv.so.440.100\nI believe this is because TSAN doesn\u0027t have symbols from the driver, and we\u0027ll have to suppress that failure. We have similar suppressions already",
      "revId": "68d4f9e724df158d1b98aa9e092250888d18ceb6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c62a85dc_f0bca56a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1003501
      },
      "writtenOn": "2024-06-10T23:40:18Z",
      "side": 1,
      "message": "Yes, we could add the suppression on NVIDIA linux, it would reduce the stderr noises in the tsan bots currently. I think we should add the suppression in this CL.",
      "parentUuid": "3905b81a_1576d50c",
      "revId": "68d4f9e724df158d1b98aa9e092250888d18ceb6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b8dd992_f35cf84f",
        "filename": "src/dawn/native/ExecutionQueue.cpp",
        "patchSetId": 5
      },
      "lineNbr": 73,
      "author": {
        "id": 1003501
      },
      "writtenOn": "2024-06-10T23:40:18Z",
      "side": 1,
      "message": "Is this function thread safe though? I feel like two threads storing at the same time would lead to wrong one being stored.\nIf it\u0027s not thread safe I guess we can add a TODO here?\n\nIt looks like this function is always used by Device, which is protected by device\u0027s lock in the MultithreadTests, hence it won\u0027t trigger TSAN.",
      "revId": "68d4f9e724df158d1b98aa9e092250888d18ceb6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f506944a_ac282f7a",
        "filename": "src/dawn/native/vulkan/QueueVk.cpp",
        "patchSetId": 5
      },
      "lineNbr": 467,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2024-06-10T23:24:33Z",
      "side": 1,
      "message": "nit. Maybe an `optional\u003cResultOrError\u003cVkFence\u003e\u003e` is more appropriate for this to make it a bit more explicit that we can have no errors but no fence? Then below we could have a simple:\n\n```\nif (result) {\n    return *result;\n}\n```",
      "range": {
        "startLine": 467,
        "startChar": 62,
        "endLine": 467,
        "endChar": 84
      },
      "revId": "68d4f9e724df158d1b98aa9e092250888d18ceb6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}