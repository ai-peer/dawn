{
  "comments": [
    {
      "key": {
        "uuid": "edf9729f_aa90708a",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 44,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "Nit: this function now modifies state (SubresourceContentInitialized), maybe it could be renamed (e.g. BeginMTLRenderPass?), and the call to it moved inside EncodeRenderPass.",
      "range": {
        "startLine": 44,
        "startChar": 33,
        "endLine": 44,
        "endChar": 62
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1e6703d_c70b1693",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 44,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Not anymore. I\u0027ve factored all that stuff out to LazyClearRenderPassAttachments. Plan to do the same in the other backends as well in a follow-up. I don\u0027t think iterating the RenderPassDescriptor twice is so bad.",
      "parentUuid": "edf9729f_aa90708a",
      "range": {
        "startLine": 44,
        "startChar": 33,
        "endLine": 44,
        "endChar": 62
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "554da21a_b74a9b1f",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "We also need to set the clear color to 0 otherwise we\u0027ll clear with whatever is in attachmentInfo.clearColor. We should have a test for this as other backends might have the same bug.",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec26a424_4d3175ab",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "554da21a_b74a9b1f",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6dc25b9e_8e2d15f4",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 149,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "Logic here doesn\u0027t seem to match how depth/stencilAttachment.storeAction are set below. The ideal thing is to have separate tracking for depth and stencil, I guess. I\u0027m not sure if there\u0027s a simpler short term solution.",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 149,
        "endChar": 17
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80f2de45_35eae402",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 720,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "doesn\u0027t this need to be the actual layer count? and below",
      "range": {
        "startLine": 720,
        "startChar": 95,
        "endLine": 720,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3a97b34_ef03019f",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 720,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "How about we address this in a follow-up? It\u0027s wrong in the other backends as well, and I think the overloaded arrayLayer and copySize.z is confusing here and would like to fix all the backends together as well as add the tests.",
      "parentUuid": "80f2de45_35eae402",
      "range": {
        "startLine": 720,
        "startChar": 95,
        "endLine": 720,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab8230e0_6a74b02b",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 720,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T04:20:16Z",
      "side": 1,
      "message": "OK. TODO?",
      "parentUuid": "a3a97b34_ef03019f",
      "range": {
        "startLine": 720,
        "startChar": 95,
        "endLine": 720,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6777802_3aefb962",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 723,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 723,
        "startChar": 89,
        "endLine": 723,
        "endChar": 90
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5891392b_abac31b9",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 723,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T04:20:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f6777802_3aefb962",
      "range": {
        "startLine": 723,
        "startChar": 89,
        "endLine": 723,
        "endChar": 90
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "708b4258_0214bcf8",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 754,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 754,
        "startChar": 90,
        "endLine": 754,
        "endChar": 91
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c4ac7ba_8c0e02d5",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 754,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T04:20:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "708b4258_0214bcf8",
      "range": {
        "startLine": 754,
        "startChar": 90,
        "endLine": 754,
        "endChar": 91
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e7eaa67_bc2950ad",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 782,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "this line is duplicated, so maybe factor it out too, to match the other one below even though it\u0027s just one line",
      "range": {
        "startLine": 781,
        "startChar": 0,
        "endLine": 782,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6caac178_7beeb56a",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 782,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Not sure what you mean? One is srcTexture, one is dstTexture",
      "parentUuid": "5e7eaa67_bc2950ad",
      "range": {
        "startLine": 781,
        "startChar": 0,
        "endLine": 782,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7781123_cc39c2a4",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 782,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T04:20:16Z",
      "side": 1,
      "message": "Sorry, meant this one is duplicated between T2B and T2T",
      "parentUuid": "6caac178_7beeb56a",
      "range": {
        "startLine": 781,
        "startChar": 0,
        "endLine": 782,
        "endChar": 96
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66fce4a0_8de1ffb2",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 790,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T00:01:08Z",
      "side": 1,
      "message": "seems duplicated, maybe factor out",
      "range": {
        "startLine": 783,
        "startChar": 0,
        "endLine": 790,
        "endChar": 21
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9d80165_3ee23d9a",
        "filename": "src/dawn_native/metal/CommandBufferMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 790,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2020-01-08T04:20:16Z",
      "side": 1,
      "message": "And this one is duplicated between B2T and T2T",
      "parentUuid": "66fce4a0_8de1ffb2",
      "range": {
        "startLine": 783,
        "startChar": 0,
        "endLine": 790,
        "endChar": 21
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40c9023c_a73eb708",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-07T00:34:09Z",
      "side": 1,
      "message": "nit: Unnecessary include",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 41
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbea8127_d683cb2a",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "40c9023c_a73eb708",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 41
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fb63457_68001ba3",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 386,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "Just to make sure, this isn\u0027t an issue for T2B or B2T copies because of the rowPitch alignment constraint?",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1ca0aad_357a70ad",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 386,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Yep.",
      "parentUuid": "6fb63457_68001ba3",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "617d19aa_ef09f493",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 393,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "That\u0027s new, I think we might need additional validation for this.",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "191c8b29_227261ee",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 393,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Filed a Dawn bug about fixing this for Metal, and filed a WebGPU spec issue.",
      "parentUuid": "617d19aa_ef09f493",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6414e9a_30d1a4d1",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 408,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "Why not memset? Here for R8Unorm formats all pixels might not be set to 1",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d601ad70_04d630ab",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 408,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Hm, the NonzeroTextureInit tests were written this way. I changed them though to check that all bytes are set instead: 0xFF. I also added tests for DepthStencil init. This would have been inconsistent between backends depending on how the clearing happens because 1.f -\u003e unorm integer wouldn\u0027t have been 1u.",
      "parentUuid": "c6414e9a_30d1a4d1",
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af1902ad_980021d5",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 424,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-07T00:34:09Z",
      "side": 1,
      "message": "fyi: Other backends don\u0027t have this check, and over-eagerly clear all subresources even if you initialized one of them. Added a test and suppressed on non-Metal.\n\nAlso, when I fix the other backends, I\u0027m thinking we should make the count at [1] be the number of subresources cleared, not the number of resources that got a lazy clear.",
      "range": {
        "startLine": 420,
        "startChar": 16,
        "endLine": 424,
        "endChar": 17
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d14dc5b_2f9fee06",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 424,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "agreed. Also this might tie in with subresource tracking where there is a special state that\u0027s uninitialized.",
      "parentUuid": "af1902ad_980021d5",
      "range": {
        "startLine": 420,
        "startChar": 16,
        "endLine": 424,
        "endChar": 17
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "effcd2af_7e5164df",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 424,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5d14dc5b_2f9fee06",
      "range": {
        "startLine": 420,
        "startChar": 16,
        "endLine": 424,
        "endChar": 17
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "915db5ab_f6674f66",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 428,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-07T00:34:09Z",
      "side": 1,
      "message": "fyi: Crashes with the Metal validation layers without doing this (interestingly because it tries to divide by zero). We need to fix this for the other copyXToTexture calls as well.\n\nhttps://developer.apple.com/documentation/metal/mtlblitcommandencoder/1400771-copyfrombuffer?language\u003dobjc",
      "range": {
        "startLine": 426,
        "startChar": 16,
        "endLine": 428,
        "endChar": 38
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66266a2d_09e07e9d",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 428,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-01-07T12:43:50Z",
      "side": 1,
      "message": "Sounds good. We\u0027ll hit the same issue with subresource tracking where for depth-stencil textures we might want to track both depth and stencil separately.",
      "parentUuid": "915db5ab_f6674f66",
      "range": {
        "startLine": 426,
        "startChar": 16,
        "endLine": 428,
        "endChar": 38
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ee63710_2b924273",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 428,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "66266a2d_09e07e9d",
      "range": {
        "startLine": 426,
        "startChar": 16,
        "endLine": 428,
        "endChar": 38
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0d685ec_c9f38bfc",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 457,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-07T00:34:09Z",
      "side": 1,
      "message": "[1]",
      "range": {
        "startLine": 457,
        "startChar": 12,
        "endLine": 457,
        "endChar": 56
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0576357_f8df521b",
        "filename": "src/dawn_native/metal/TextureMTL.mm",
        "patchSetId": 7
      },
      "lineNbr": 457,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2020-01-08T01:38:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b0d685ec_c9f38bfc",
      "range": {
        "startLine": 457,
        "startChar": 12,
        "endLine": 457,
        "endChar": 56
      },
      "revId": "e91c5718524e7db8f133e248f684c668291f46d6",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd",
      "unresolved": false
    }
  ]
}