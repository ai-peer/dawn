{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "db4d905a_cfad9352",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2024-03-04T10:01:24Z",
      "side": 1,
      "message": "PTAL, thanks!",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04482888_645a0534",
        "filename": "src/dawn/native/CommandBufferStateTracker.h",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-03-04T12:56:49Z",
      "side": 1,
      "message": "nit: this should be a PerBindGroup\u003craw_ptr\u003e",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65974e34_420d1f7b",
        "filename": "src/dawn/native/CommandBufferStateTracker.h",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-03-04T12:56:49Z",
      "side": 1,
      "message": "I believe it should be sufficient to \"clear\" the CommandBufferStateTracker on EndPass to avoid the dangling pointer. And we\u0027d need to clear the mBindGroups as well.",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16387109_2fce6191",
        "filename": "src/dawn/native/CommandBufferStateTracker.h",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2024-03-05T02:08:39Z",
      "side": 1,
      "message": "The problem is to properly handle the cases of \"DestroyObjectRegressionTests.LastRefInCommandEncoder*\", where device.Destroy is called before EncPass() is called on the command encoder. I find we need to add a reference here to fix this issue.",
      "parentUuid": "65974e34_420d1f7b",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "682e1043_efe4cfdc",
        "filename": "src/dawn/native/CommandBufferStateTracker.h",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2024-03-05T05:35:12Z",
      "side": 1,
      "message": "We can see the tests in DestroyObjectTests.cpp and I\u0027ve added another one to test bind groups.",
      "parentUuid": "16387109_2fce6191",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e910b8f3_3c073d6a",
        "filename": "src/dawn/native/CommandBufferStateTracker.h",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-03-05T09:05:50Z",
      "side": 1,
      "message": "Why is it a problem? DestroyObjectRegressionTests.LastRefInCommandEncoder should call Device::DestroyObjects that calls DestroyImpl() on all the encoders before destroying the actual objects. If we clear the CommandBufferStateTracker on DestroyImpl as well, it should work?",
      "parentUuid": "682e1043_efe4cfdc",
      "revId": "2387d0b50812a80c871ab284cb180f103a3d85d3",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}