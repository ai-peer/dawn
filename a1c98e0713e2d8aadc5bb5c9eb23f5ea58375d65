{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "807340e3_58ab19a2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T15:03:19Z",
      "side": 1,
      "message": "I don\u0027t see how this CL relates to the bug, could you explain it?",
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3355364d_beb209da",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2023-06-06T16:12:29Z",
      "side": 1,
      "message": "Yea, sorry, so in the original CL, Austin mentioned that it would be best to clean up and make sure that function pointers and userdata members are not serialized on the wire (https://dawn-review.googlesource.com/c/dawn/+/135623/comment/128d3bf1_67360714/). More specifically, I think the goal is to remove those as members in the `Transfer` struct entirely which is the goal of this CL. (I will update the description with the next fix.)",
      "parentUuid": "807340e3_58ab19a2",
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f07eaaa8_eb1dc0d1",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-06T02:36:51Z",
      "side": 1,
      "message": "hm, I feel like we must be able to do this without adding skip_serialize.\n\nWe can have a function which says whether a member is serializable or not. I think that the following things are not serializable:\n - function pointers\n - non-value types that are void with `member.length \u003d\u003d \"constant\"`\n \n \nThen we could do something like:\n\n```\n{% set serializable_members \u003d [] %}\n{%- for member in members %}\n  {% if is_serializable(member) %}\n     {{ serializable_members.append(member) }}\n  {% endif %}\n{% endfor %}\n```\n\nat the very top of write_record_serialization_helpers, and then mostly use `serializable_members` throughout. That\u0027ll help us keep the transfer struct / serialize / deserialize all in sync with the same set of members.\n\nI also think we would need the code at [1] which skips over already-initialized-to-nullptr members",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e41cef4c_cfaf1c45",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1002831
      },
      "writtenOn": "2023-06-06T04:55:09Z",
      "side": 1,
      "message": "So to be clear, `skip_serialize` already exists (see https://source.chromium.org/chromium/chromium/src/+/main:third_party/dawn/dawn_wire.json;l\u003d40). I\u0027m just extending it for this. I\u0027m hesitant to add another concept of serializable on top of that because then it becomes a really overloaded term.\n\nMaybe it will work for the `Serialize` function to do something like that, but IIUC, just cause something is `skip_serialize` it does NOT mean it skips being `Deserialize`d. I think maybe a better way is to define the two cases more explicitly? WDYT?",
      "parentUuid": "f07eaaa8_eb1dc0d1",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3899efda_60bbda10",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T15:03:19Z",
      "side": 1,
      "message": "I\u0027m not sure why we need to do this CL TBH, function pointers are shielded with the existing code, and a void* will be not wire transparent, which means that we\u0027ll have code trying to act on individual void elements which is a compile error. Why do we need this CL?",
      "parentUuid": "e41cef4c_cfaf1c45",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "175a0709_db4d274b",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-06T15:57:12Z",
      "side": 1,
      "message": "\u003e which means that we\u0027ll have code trying to act on individual void elements which is a compile error\n\nnot sure what you mean by this. right now we are actually serializing void* and it\u0027s not a compile error. Goal is to disallow serializing it and not have it be part of the serialized data.",
      "parentUuid": "3899efda_60bbda10",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c0fbcf6_60b5a913",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T16:31:22Z",
      "side": 1,
      "message": "Ah damn I forgot that we added void* directly as a hack for getMappedRange. Maybe we could undo that? Not sure.",
      "parentUuid": "175a0709_db4d274b",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d1965ef_0f18b501",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 255,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-06T16:52:57Z",
      "side": 1,
      "message": "\u003e I\u0027m hesitant to add another concept of serializable on top of that because then it becomes a really overloaded term ..... I think maybe a better way is to define the two cases more explicitly? WDYT?\n\nagree we don\u0027t want to have too many overlapping concepts\n\nmotivation for not using skip_serialize in the .json is that this information is sort of redundant. the generator should know if something can/cannot be serialized, so don\u0027t want to add additional tags about it.\n\nyou\u0027re right that skip_serialize does NOT mean it skips being Deserialized. It\u0027s more like a custom serialization mechanism that gets used with the `SerializeCommand(..., CommandExtension` serialization variant. So perhaps what we can do is name is change that to a `manual_serialize` concept?",
      "parentUuid": "3c0fbcf6_60b5a913",
      "range": {
        "startLine": 244,
        "startChar": 0,
        "endLine": 255,
        "endChar": 0
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2eb331e4_be761ec3",
        "filename": "generator/templates/dawn/wire/WireCmd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 411,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-06T02:36:51Z",
      "side": 1,
      "message": "[1]",
      "range": {
        "startLine": 411,
        "startChar": 95,
        "endLine": 411,
        "endChar": 144
      },
      "revId": "a1c98e0713e2d8aadc5bb5c9eb23f5ea58375d65",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}