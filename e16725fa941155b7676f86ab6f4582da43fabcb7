{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "783acac5_d7fb94f6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T14:59:30Z",
      "side": 1,
      "message": "Once this change lands and rolls into Chromium, we can then land this CL: https://chromium-review.googlesource.com/c/chromium/src/+/4655091",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2634a8c4_642e97d5",
        "filename": "include/dawn/platform/DawnPlatform.h",
        "patchSetId": 5
      },
      "lineNbr": 107,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "If I didn\u0027t know what you\u0027re working on, I\u0027d struggle to understand what these methods do. Could do with comments.\n\nWould it be preferable to have a single method on `Platform` to return a `Histogram` (or maybe `Telemetry`) interface? It means you can bundle all the telemetry stuff in one place, you could `DAWN_PLATFORM_EXPORT` the interface, and wouldn\u0027t necessarily need to create a new derived class to enable / disable this stuff.",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 107,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f159884_f1368ff0",
        "filename": "include/dawn/platform/DawnPlatform.h",
        "patchSetId": 5
      },
      "lineNbr": 107,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "\u003e If I didn\u0027t know what you\u0027re working on, I\u0027d struggle to understand what these methods do. Could do with comments.\n\nAll of this is based off of what exists in the Chromium source, which is the best documentation. It didn\u0027t seem necessary to copy all of their comments (see histogram_macros.h in chromium source).\n\n\u003e Would it be preferable to have a single method on Platform to return a Histogram (or maybe Telemetry) interface? It means you can bundle all the telemetry stuff in one place, you could DAWN_PLATFORM_EXPORT the interface, and wouldn\u0027t necessarily need to create a new derived class to enable / disable this stuff.\n\nThis isn\u0027t a new class. This class is the Platform class that exists precisely for this purpose -- that is, so that Chrome can implement certain parts (see AddEvent). This implementation is what Austin suggested.",
      "parentUuid": "2634a8c4_642e97d5",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 107,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "313add40_d41e1b46",
        "filename": "include/dawn/platform/DawnPlatform.h",
        "patchSetId": 5
      },
      "lineNbr": 107,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-29T16:44:39Z",
      "side": 1,
      "message": "I\u0027d agree it\u0027s worth adding some comments. We did it for the more recent caching interface, and neglected to document for the trace events a long time ago.\n\nyou could have a separate histogram interface, like the caching interface or worker pool but I\u0027m not sure it\u0027s as necessary to have the extra indirections in this case. I don\u0027t feel very strongly about it though",
      "parentUuid": "4f159884_f1368ff0",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 107,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ab5063a_4226a1e2",
        "filename": "include/dawn/platform/DawnPlatform.h",
        "patchSetId": 5
      },
      "lineNbr": 107,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "Added comments to all macros, and function declarations. I agree it\u0027s much better.",
      "parentUuid": "313add40_d41e1b46",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 107,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3accbb3_a85c2304",
        "filename": "src/dawn/platform/metrics/Histogram.cpp",
        "patchSetId": 5
      },
      "lineNbr": 31,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-29T16:44:39Z",
      "side": 1,
      "message": "I\u0027m not sure we need to have the same condition to enable it. For event tracing, every event has a timestamp, so we can\u0027t actually report them without a valid timestamp.\n\nFor the histograms, It\u0027s probably sufficient to call the virtual method and give it a default no-op implementation?\n\nI suppose it\u0027s different for times vs other counts/booleans. Maybe the dependency on `MonotonicallyIncreasingTime` can be part of the scoped timer class?",
      "range": {
        "startLine": 29,
        "startChar": 4,
        "endLine": 31,
        "endChar": 5
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2aa91819_4bc45a9a",
        "filename": "src/dawn/platform/metrics/Histogram.cpp",
        "patchSetId": 5
      },
      "lineNbr": 31,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "I agree, and removed these conditions, and made the default implementation no-op. It\u0027s much cleaner now, and simplified the unit tests.",
      "parentUuid": "a3accbb3_a85c2304",
      "range": {
        "startLine": 29,
        "startChar": 4,
        "endLine": 31,
        "endChar": 5
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a15a168d_e0302859",
        "filename": "src/dawn/platform/metrics/Histogram.h",
        "patchSetId": 5
      },
      "lineNbr": 43,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "Could do with documentation.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 43,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c852cf7a_9af214d8",
        "filename": "src/dawn/platform/metrics/Histogram.h",
        "patchSetId": 5
      },
      "lineNbr": 43,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a15a168d_e0302859",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 43,
        "endChar": 0
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e25fe50_c8249bc3",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-29T16:44:39Z",
      "side": 1,
      "message": "we could name it HistogramMacros.h to match the casing of the rest of the Dawn files",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2fe8260a_accaf467",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e25fe50_c8249bc3",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3634ffe_a531c5c9",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "Again, docs would be great for all these macros. I wouldn\u0027t know what to do with these by just looking at them.",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71442dc7_c4d5a585",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "Again, I\u0027m avoiding copy-pasting the docs from Chromium\u0027s histogram_macros.h, which is extensive. I can add a link to it a the top of the file.",
      "parentUuid": "a3634ffe_a531c5c9",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff110dc3_239b74ab",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71442dc7_c4d5a585",
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98bb287f_530e9dc0",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "Rather arbitrary. Should we create some documented `constexpr` constants for these?",
      "range": {
        "startLine": 25,
        "startChar": 64,
        "endLine": 25,
        "endChar": 67
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21528f68_8455a880",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "This isn\u0027t arbitrary, but exactly how it\u0027s defined in Chromium\u0027s histogram_macros.h.",
      "parentUuid": "98bb287f_530e9dc0",
      "range": {
        "startLine": 25,
        "startChar": 64,
        "endLine": 25,
        "endChar": 67
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b13a830b_b68059ee",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1000032
      },
      "writtenOn": "2023-06-29T16:44:39Z",
      "side": 1,
      "message": "we don\u0027t actually have to exactly copy the exact form of Chromium\u0027s though - just need a compatible interface\n\nlike given these are implicitly millisecond times, we could name it DAWN_HISTOGRAM_MS_TIMES, etc. mentioned in chat - it would also let us have versions of microseconds precision too",
      "parentUuid": "21528f68_8455a880",
      "range": {
        "startLine": 25,
        "startChar": 64,
        "endLine": 25,
        "endChar": 67
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9bc0ab3e_96cf6ba3",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "I think it\u0027s important that these mostly match the ones from Chrome, so I left the names, but I renamed all the arg names so that it\u0027s much clearer. Note that in Chrome, they use time::milliseconds(), etc. to make clear what the units are. Maybe we can add something similar to Dawn in the future.",
      "parentUuid": "b13a830b_b68059ee",
      "range": {
        "startLine": 25,
        "startChar": 64,
        "endLine": 25,
        "endChar": 67
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d40e970f_46f14e8e",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "could do with units",
      "range": {
        "startLine": 41,
        "startChar": 60,
        "endLine": 41,
        "endChar": 68
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b30450d_e3fc311a",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "Copied from Chromium\u0027s histogram_macros.h.",
      "parentUuid": "d40e970f_46f14e8e",
      "range": {
        "startLine": 41,
        "startChar": 60,
        "endLine": 41,
        "endChar": 68
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88152407_e1a4488c",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T21:14:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b30450d_e3fc311a",
      "range": {
        "startLine": 41,
        "startChar": 60,
        "endLine": 41,
        "endChar": 68
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "286c5acb_2117cfc3",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "Is this to avoid the virtual call overhead?",
      "range": {
        "startLine": 91,
        "startChar": 4,
        "endLine": 91,
        "endChar": 86
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7692eaf3_ec4f7672",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "Yes. Also, it means I can avoid including the platform header in this file.",
      "parentUuid": "286c5acb_2117cfc3",
      "range": {
        "startLine": 91,
        "startChar": 4,
        "endLine": 91,
        "endChar": 86
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c6e6d28_9e26fe9a",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 96,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:10:05Z",
      "side": 1,
      "message": "Why isn\u0027t `MonotonicallyIncreasingTime` declared on the base `Platform` class?\nIf you did put all the telemetry stuff in a new class or interface, this could go in there?",
      "range": {
        "startLine": 96,
        "startChar": 52,
        "endLine": 96,
        "endChar": 79
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "013b1c5a_6a993973",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 96,
      "author": {
        "id": 1002361
      },
      "writtenOn": "2023-06-29T15:20:50Z",
      "side": 1,
      "message": "It _is_ declared on the Platform class, see `include\\dawn\\platform\\DawnPlatform.h`.",
      "parentUuid": "1c6e6d28_9e26fe9a",
      "range": {
        "startLine": 96,
        "startChar": 52,
        "endLine": 96,
        "endChar": 79
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d3034ec_1373e674",
        "filename": "src/dawn/platform/metrics/histogram_macros.h",
        "patchSetId": 5
      },
      "lineNbr": 96,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-06-29T15:46:32Z",
      "side": 1,
      "message": "Sorry, gerrit hid this in the code review windowing.",
      "parentUuid": "013b1c5a_6a993973",
      "range": {
        "startLine": 96,
        "startChar": 52,
        "endLine": 96,
        "endChar": 79
      },
      "revId": "e16725fa941155b7676f86ab6f4582da43fabcb7",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}