{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f3622799_efe794b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2021-01-25T13:56:36Z",
      "side": 1,
      "message": "It occurs to me the better thing to do here (for lazy clears in writepixels) would be:\n\n- if the subresource is uninitialized,\n  - if the writepixels is full width \u0026 height\n    - set the subresource initialized\n  - else\n    - clear the subresource before writing\n\nBetter still would be to track initialized regions as subrects, but that\u0027d be a larger change.",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "500507a3_c10bdc0d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2021-01-25T13:57:34Z",
      "side": 1,
      "message": "s/writepixels/WriteTexture/",
      "parentUuid": "f3622799_efe794b8",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f638057_dd9ee900",
        "filename": "src/dawn_native/opengl/QueueGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 107,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-01-25T16:10:25Z",
      "side": 1,
      "message": "What happens if the texture isn\u0027t initialized and we WriteTexture to only part of the subresource? Aren\u0027t we going to have uninitialized data in the part we didn\u0027t write to?",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4df65908_f2f1ad6d",
        "filename": "src/dawn_native/opengl/QueueGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 107,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-01-25T16:11:04Z",
      "side": 1,
      "message": "That\u0027s likely the cause of the failures you see in the later patchset (which could be folded in this one after this is fixed)",
      "parentUuid": "7f638057_dd9ee900",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4fcf6f5_dcd7976f",
        "filename": "src/dawn_native/opengl/QueueGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 107,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2021-01-25T16:32:09Z",
      "side": 1,
      "message": "Yeah, as I said above, I think the safer solution is:\n\nif the subresource is uninitialized,\n  - if the writepixels is full width \u0026 height\n    - set the subresource initialized\n  - else\n    - clear the subresource before writing\n\nDoes that make sense?\n\n(I mean the safest thing would be to always clear if uninit, but the above seems a safe enough optimization.)",
      "parentUuid": "4df65908_f2f1ad6d",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2aa0de1c_e2a0769f",
        "filename": "src/dawn_native/opengl/QueueGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 107,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-01-25T16:35:26Z",
      "side": 1,
      "message": "Yep that works, and is what is done in other backends https://source.chromium.org/chromium/chromium/src/+/master:third_party/dawn/src/dawn_native/d3d12/DeviceD3D12.cpp;l\u003d406;drc\u003dce8d17ff494cf684f35c8ff64cb6bd0947adcf46;bpv\u003d1;bpt\u003d1\n\n(the common code for WriteTexture calls CopyFromStagingToTexture)",
      "parentUuid": "e4fcf6f5_dcd7976f",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "23087a82_6630d846",
        "filename": "src/dawn_native/opengl/QueueGL.cpp",
        "patchSetId": 12
      },
      "lineNbr": 107,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2021-01-25T17:03:34Z",
      "side": 1,
      "message": "Thanks! That\u0027s cleaner than what I had started to write.",
      "parentUuid": "2aa0de1c_e2a0769f",
      "revId": "e8f4d3a67d92bfc824a44774f3846d489e4fbf70",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}