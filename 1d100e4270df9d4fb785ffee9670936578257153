{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c454a3a1_a2252264",
        "filename": "src/dawn/native/vulkan/DeviceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 361,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2022-09-21T00:28:50Z",
      "side": 0,
      "message": "I internally made the exported semaphore \u0027leaked\u0027 -- no vkDestroySemaphore of it. I had suffered quite a lot weird driver errors running the sample dozens of minutes.\nThe relating vkspec [text](https://registry.khronos.org/vulkan/specs/1.2-extensions/html/vkspec.html#synchronization-semaphores-importing) is not easy to understand. Just for your information to confirm.",
      "revId": "1d100e4270df9d4fb785ffee9670936578257153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0aa6469a_b0c92110",
        "filename": "src/dawn/native/vulkan/DeviceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 361,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2022-09-21T00:40:22Z",
      "side": 0,
      "message": "BTW, currently on ChromeOS we are using VK_EXTERNAL_SEMAPHORE_HANDLE_TYPE_SYNC_FD_BIT, while on Linux we are using VK_EXTERNAL_SEMAPHORE_HANDLE_TYPE_OPAQUE_FD_BIT_KHR. They are not exactly same. That might matter if you have observed something abnormal on Linux.",
      "parentUuid": "c454a3a1_a2252264",
      "revId": "1d100e4270df9d4fb785ffee9670936578257153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a63e3a75_c69f2c3c",
        "filename": "src/dawn/native/vulkan/DeviceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 361,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-09-21T11:58:07Z",
      "side": 0,
      "message": "The text doesn\u0027t say explicitly that the VkSemaphore is destroyed on export, so we should assume that nothing happens and that the semaphore isn\u0027t destroyed. The VVLs also complain that we haven\u0027t destroyed the semaphore. Finally the relevant code in Mesa doesn\u0027t do the destroy either. https://github.com/Mesa3D/mesa/blob/cc980ee0ed28c211e43727d2db79bedc12dd0841/src/vulkan/runtime/vk_semaphore.c#L477\n\nSo I\u0027m fairly confident that the Vulkan semantic is that exporting doesn\u0027t destroy the semaphore. If there\u0027s a driver bug then we\u0027ll have to see what do to.",
      "parentUuid": "0aa6469a_b0c92110",
      "revId": "1d100e4270df9d4fb785ffee9670936578257153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc5c5dbe_2aa30cec",
        "filename": "src/dawn/native/vulkan/DeviceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 361,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2022-09-22T01:39:20Z",
      "side": 0,
      "message": "I\u0027ve just verified this CL on my device. It worked well. I can\u0027t recall exactly what led me to the misunderstanding on this. Sorry for that, and thanks for fixing it.",
      "parentUuid": "a63e3a75_c69f2c3c",
      "revId": "1d100e4270df9d4fb785ffee9670936578257153",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}