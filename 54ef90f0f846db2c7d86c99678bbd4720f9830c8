{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fa116697_e1921cfc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-20T21:19:50Z",
      "side": 1,
      "message": "LGTM, but I need to do another proper review when I\u0027m less tired. A bunch of nits so far.",
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "349da378_bb0a935b",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-20T21:19:50Z",
      "side": 1,
      "message": "why `map`?",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 29
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8fb091a_af64db8e",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-20T21:28:21Z",
      "side": 1,
      "message": "I wanted the ordered nature (for determinism). I guess I could\u0027ve used a `Hashmap` and then sorted the keys, but it\u0027s unclear whether that\u0027s expected to be faster/better (is it?).",
      "parentUuid": "349da378_bb0a935b",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 29
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ebd0067d_f20dbd4e",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-21T16:33:43Z",
      "side": 1,
      "message": "It should avoid heap allocations. I can\u0027t guarantee it\u0027ll be faster without benchmarking - but historically I\u0027ve been hurt by the really crappy performance of `std::map`. I would hope that a single sort-at-end would be faster than preserving the order on insertion.",
      "parentUuid": "f8fb091a_af64db8e",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 29
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30f9b296_96d6a361",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-21T18:47:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ebd0067d_f20dbd4e",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 29
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b461880_84c8442e",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-21T16:33:43Z",
      "side": 1,
      "message": "Note to self: function-block -\u003e function information could simplify the traversals required by this transform. Call graph information would also be helpful.",
      "range": {
        "startLine": 91,
        "startChar": 24,
        "endLine": 91,
        "endChar": 44
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b63f6226_6a2c8013",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-25T17:33:25Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "8b461880_84c8442e",
      "range": {
        "startLine": 91,
        "startChar": 24,
        "endLine": 91,
        "endChar": 44
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4809a74f_cf39b497",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-20T21:19:50Z",
      "side": 1,
      "message": "nit: `if (auto itr \u003d block_to_direct_vars.Find(block)) {`",
      "range": {
        "startLine": 122,
        "startChar": 0,
        "endLine": 123,
        "endChar": 18
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cde637dc_d6e574ae",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-20T21:28:21Z",
      "side": 1,
      "message": "Will do.",
      "parentUuid": "4809a74f_cf39b497",
      "range": {
        "startLine": 122,
        "startChar": 0,
        "endLine": 123,
        "endChar": 18
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "632b1325_7f3380b1",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-21T18:47:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cde637dc_d6e574ae",
      "range": {
        "startLine": 122,
        "startChar": 0,
        "endLine": 123,
        "endChar": 18
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4131fa1_66c42c8c",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-20T21:19:50Z",
      "side": 1,
      "message": "If you take https://dawn-review.googlesource.com/c/dawn/+/152400/6/src/tint/lang/core/ir/traverse.h, this becomes:\n\n```\nir::Traverse(block, [\u0026](UserCall* call) {\n    // Get variables referenced by a function called from this block.\n    for (auto* var : GetReferencedVars(call-\u003eTarget())) {\n        vars.Add(var);\n    }\n});\n```",
      "range": {
        "startLine": 129,
        "startChar": 8,
        "endLine": 144,
        "endChar": 9
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9c87d3b_6d65d96f",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-20T21:28:21Z",
      "side": 1,
      "message": "Will do if DVA lands first, otherwise will do as a follow-up afterwards.",
      "parentUuid": "b4131fa1_66c42c8c",
      "range": {
        "startLine": 129,
        "startChar": 8,
        "endLine": 144,
        "endChar": 9
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4505cf7a_2399eab0",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-21T16:33:43Z",
      "side": 1,
      "message": "Ack. I will pull it out as a separate change - but still happy for this to be done as a follow up.",
      "parentUuid": "b9c87d3b_6d65d96f",
      "range": {
        "startLine": 129,
        "startChar": 8,
        "endLine": 144,
        "endChar": 9
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c6aa0a6_4b184215",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 222,
      "author": {
        "id": 1001737
      },
      "writtenOn": "2023-09-20T21:19:50Z",
      "side": 1,
      "message": "nit: `for (auto idx : Reverse(store.indices)) {`",
      "range": {
        "startLine": 222,
        "startChar": 12,
        "endLine": 222,
        "endChar": 89
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bd8d7bc_f259e9f3",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 222,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-20T21:28:21Z",
      "side": 1,
      "message": "Will do.",
      "parentUuid": "2c6aa0a6_4b184215",
      "range": {
        "startLine": 222,
        "startChar": 12,
        "endLine": 222,
        "endChar": 89
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f866f0b8_45ff2f0b",
        "filename": "src/tint/lang/core/ir/transform/zero_init_workgroup_memory.cc",
        "patchSetId": 6
      },
      "lineNbr": 222,
      "author": {
        "id": 1002241
      },
      "writtenOn": "2023-09-21T18:47:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6bd8d7bc_f259e9f3",
      "range": {
        "startLine": 222,
        "startChar": 12,
        "endLine": 222,
        "endChar": 89
      },
      "revId": "54ef90f0f846db2c7d86c99678bbd4720f9830c8",
      "serverId": "dd02978d-1a8e-36d7-bcc0-a5723e5c0abd"
    }
  ]
}